2024-11-07T14:13:08.090+07:00  INFO 69465 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : Starting InvoiceProjectApplication using Java 22.0.1 with PID 69465 (/Users/pro/Documents/Workspace/invoiceProject/target/classes started by pro in /Users/pro/Documents/Workspace/invoiceProject)
2024-11-07T14:13:08.100+07:00  INFO 69465 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : No active profile set, falling back to 1 default profile: "default"
2024-11-07T14:13:08.941+07:00  INFO 69465 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-07T14:13:09.057+07:00  INFO 69465 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 105 ms. Found 15 JPA repository interfaces.
2024-11-07T14:13:09.833+07:00  INFO 69465 --- [InvoiceManagement] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-11-07T14:13:09.845+07:00  INFO 69465 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-11-07T14:13:09.845+07:00  INFO 69465 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.26]
2024-11-07T14:13:09.894+07:00  INFO 69465 --- [InvoiceManagement] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-11-07T14:13:09.895+07:00  INFO 69465 --- [InvoiceManagement] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1736 ms
2024-11-07T14:13:10.068+07:00  INFO 69465 --- [InvoiceManagement] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-07T14:13:10.156+07:00  INFO 69465 --- [InvoiceManagement] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-11-07T14:13:10.206+07:00  INFO 69465 --- [InvoiceManagement] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-11-07T14:13:10.559+07:00  INFO 69465 --- [InvoiceManagement] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-07T14:13:10.586+07:00  INFO 69465 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-11-07T14:13:11.012+07:00  INFO 69465 --- [InvoiceManagement] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6de84336
2024-11-07T14:13:11.013+07:00  INFO 69465 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-11-07T14:13:12.229+07:00  INFO 69465 --- [InvoiceManagement] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-07T14:13:12.375+07:00  INFO 69465 --- [InvoiceManagement] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T14:13:12.679+07:00  INFO 69465 --- [InvoiceManagement] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-11-07T14:13:13.597+07:00  INFO 69465 --- [InvoiceManagement] [main] c.e.i.Config.ApplicationInitConfig       : Initializing Application
2024-11-07T14:13:13.651+07:00  WARN 69465 --- [InvoiceManagement] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-11-07T14:13:13.668+07:00 TRACE 69465 --- [InvoiceManagement] [main] eGlobalAuthenticationAutowiredConfigurer : Eagerly initializing {securityConfig=com.example.invoiceProject.Config.SecurityConfig$$SpringCGLIB$$0@281f2d6c}
2024-11-07T14:13:13.670+07:00 DEBUG 69465 --- [InvoiceManagement] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-11-07T14:13:13.786+07:00  INFO 69465 --- [InvoiceManagement] [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-11-07T14:13:14.016+07:00 DEBUG 69465 --- [InvoiceManagement] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BearerTokenAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-11-07T14:13:14.296+07:00  INFO 69465 --- [InvoiceManagement] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2024-11-07T14:13:14.304+07:00  INFO 69465 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : Started InvoiceProjectApplication in 6.65 seconds (process running for 7.088)
2024-11-07T14:13:14.443+07:00  INFO 69465 --- [InvoiceManagement] [main] c.e.i.Config.ApplicationInitConfig       : Application initialization completed .....
2024-11-07T14:15:07.263+07:00  INFO 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-07T14:15:07.263+07:00  INFO 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-11-07T14:15:07.264+07:00  INFO 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-11-07T14:15:07.280+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@72b25658, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@34936fc, org.springframework.security.web.context.SecurityContextHolderFilter@253c82ad, org.springframework.security.web.header.HeaderWriterFilter@294c1b45, org.springframework.web.filter.CorsFilter@5cd5981d, org.springframework.security.web.authentication.logout.LogoutFilter@4e9ab294, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@2f7432f3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3af8f1ef, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57064d38, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1a165a27, org.springframework.security.web.session.SessionManagementFilter@28058dd0, org.springframework.security.web.access.ExceptionTranslationFilter@5f092eaa, org.springframework.security.web.access.intercept.AuthorizationFilter@1070308e]] (1/1)
2024-11-07T14:15:07.281+07:00 DEBUG 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /auth/token
2024-11-07T14:15:07.282+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:15:07.283+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:15:07.285+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:15:07.286+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:15:07.287+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:15:07.288+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:15:07.289+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:15:07.289+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:15:07.289+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Did not process request since did not find bearer token
2024-11-07T14:15:07.289+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:15:07.289+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:15:07.290+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:15:07.290+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:15:07.290+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2024-11-07T14:15:07.291+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]
2024-11-07T14:15:07.291+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:15:07.291+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:15:07.292+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing POST /auth/token
2024-11-07T14:15:07.294+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /auth/token using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x0000000130add6c0@57f4e65a
2024-11-07T14:15:07.294+07:00 DEBUG 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /auth/token
2024-11-07T14:15:07.551+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:15:18.861+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@72b25658, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@34936fc, org.springframework.security.web.context.SecurityContextHolderFilter@253c82ad, org.springframework.security.web.header.HeaderWriterFilter@294c1b45, org.springframework.web.filter.CorsFilter@5cd5981d, org.springframework.security.web.authentication.logout.LogoutFilter@4e9ab294, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@2f7432f3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3af8f1ef, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57064d38, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1a165a27, org.springframework.security.web.session.SessionManagementFilter@28058dd0, org.springframework.security.web.access.ExceptionTranslationFilter@5f092eaa, org.springframework.security.web.access.intercept.AuthorizationFilter@1070308e]] (1/1)
2024-11-07T14:15:18.861+07:00 DEBUG 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /department
2024-11-07T14:15:18.862+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:15:18.862+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:15:18.862+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:15:18.862+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:15:18.862+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:15:18.862+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:15:18.862+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:15:18.862+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:15:18.863+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T14:15:18.882+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T14:15:18.882+07:00 DEBUG 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T14:15:18.883+07:00 DEBUG 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@ec0ac1ca, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:15:18.883+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:15:18.883+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:15:18.883+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:15:18.883+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:15:18.883+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@ec0ac1ca, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:15:18.884+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T14:15:18.884+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:15:18.884+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:15:18.884+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing GET /department
2024-11-07T14:15:18.884+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on GET /department using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6c0efef
2024-11-07T14:15:18.884+07:00 DEBUG 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /department
2024-11-07T14:15:18.899+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:16:49.105+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@72b25658, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@34936fc, org.springframework.security.web.context.SecurityContextHolderFilter@253c82ad, org.springframework.security.web.header.HeaderWriterFilter@294c1b45, org.springframework.web.filter.CorsFilter@5cd5981d, org.springframework.security.web.authentication.logout.LogoutFilter@4e9ab294, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@2f7432f3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3af8f1ef, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57064d38, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1a165a27, org.springframework.security.web.session.SessionManagementFilter@28058dd0, org.springframework.security.web.access.ExceptionTranslationFilter@5f092eaa, org.springframework.security.web.access.intercept.AuthorizationFilter@1070308e]] (1/1)
2024-11-07T14:16:49.105+07:00 DEBUG 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing DELETE /department/delete/It department
2024-11-07T14:16:49.106+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:16:49.106+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:16:49.106+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:16:49.106+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:16:49.106+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:16:49.106+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:16:49.106+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:16:49.106+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:16:49.106+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] .s.r.w.a.BearerTokenAuthenticationFilter : Did not process request since did not find bearer token
2024-11-07T14:16:49.106+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:16:49.106+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:16:49.106+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:16:49.106+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:16:49.107+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2024-11-07T14:16:49.107+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]
2024-11-07T14:16:49.107+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:16:49.107+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:16:49.107+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] estMatcherDelegatingAuthorizationManager : Authorizing DELETE /department/delete/It department
2024-11-07T14:16:49.107+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] estMatcherDelegatingAuthorizationManager : Checking authorization on DELETE /department/delete/It department using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6c0efef
2024-11-07T14:16:49.107+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:128) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T14:16:49.112+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:17:12.611+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@72b25658, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@34936fc, org.springframework.security.web.context.SecurityContextHolderFilter@253c82ad, org.springframework.security.web.header.HeaderWriterFilter@294c1b45, org.springframework.web.filter.CorsFilter@5cd5981d, org.springframework.security.web.authentication.logout.LogoutFilter@4e9ab294, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@2f7432f3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3af8f1ef, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57064d38, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1a165a27, org.springframework.security.web.session.SessionManagementFilter@28058dd0, org.springframework.security.web.access.ExceptionTranslationFilter@5f092eaa, org.springframework.security.web.access.intercept.AuthorizationFilter@1070308e]] (1/1)
2024-11-07T14:17:12.611+07:00 DEBUG 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing DELETE /department/delete/It department
2024-11-07T14:17:12.611+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:17:12.612+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:17:12.612+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:17:12.612+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:17:12.612+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:17:12.612+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:17:12.612+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:17:12.612+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:17:12.612+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T14:17:12.616+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T14:17:12.616+07:00 DEBUG 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T14:17:12.616+07:00 DEBUG 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@ec0ac1ca, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:17:12.616+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:17:12.616+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:17:12.616+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:17:12.616+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:17:12.616+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@ec0ac1ca, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:17:12.616+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T14:17:12.617+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:17:12.617+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:17:12.617+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] estMatcherDelegatingAuthorizationManager : Authorizing DELETE /department/delete/It department
2024-11-07T14:17:12.617+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] estMatcherDelegatingAuthorizationManager : Checking authorization on DELETE /department/delete/It department using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6c0efef
2024-11-07T14:17:12.617+07:00 DEBUG 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured DELETE /department/delete/It department
2024-11-07T14:17:12.658+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:17:24.448+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@72b25658, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@34936fc, org.springframework.security.web.context.SecurityContextHolderFilter@253c82ad, org.springframework.security.web.header.HeaderWriterFilter@294c1b45, org.springframework.web.filter.CorsFilter@5cd5981d, org.springframework.security.web.authentication.logout.LogoutFilter@4e9ab294, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@2f7432f3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3af8f1ef, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57064d38, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1a165a27, org.springframework.security.web.session.SessionManagementFilter@28058dd0, org.springframework.security.web.access.ExceptionTranslationFilter@5f092eaa, org.springframework.security.web.access.intercept.AuthorizationFilter@1070308e]] (1/1)
2024-11-07T14:17:24.448+07:00 DEBUG 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing DELETE /department/delete/
2024-11-07T14:17:24.448+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:17:24.448+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:17:24.448+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:17:24.448+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:17:24.448+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:17:24.448+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:17:24.449+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:17:24.449+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:17:24.449+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T14:17:24.453+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T14:17:24.453+07:00 DEBUG 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T14:17:24.453+07:00 DEBUG 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@ec0ac1ca, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:17:24.453+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:17:24.453+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:17:24.453+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:17:24.453+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:17:24.453+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@ec0ac1ca, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:17:24.453+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T14:17:24.453+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:17:24.454+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:17:24.454+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] estMatcherDelegatingAuthorizationManager : Authorizing DELETE /department/delete/
2024-11-07T14:17:24.454+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] estMatcherDelegatingAuthorizationManager : Checking authorization on DELETE /department/delete/ using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6c0efef
2024-11-07T14:17:24.454+07:00 DEBUG 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured DELETE /department/delete/
2024-11-07T14:17:24.457+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:17:24.462+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@72b25658, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@34936fc, org.springframework.security.web.context.SecurityContextHolderFilter@253c82ad, org.springframework.security.web.header.HeaderWriterFilter@294c1b45, org.springframework.web.filter.CorsFilter@5cd5981d, org.springframework.security.web.authentication.logout.LogoutFilter@4e9ab294, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@2f7432f3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3af8f1ef, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57064d38, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1a165a27, org.springframework.security.web.session.SessionManagementFilter@28058dd0, org.springframework.security.web.access.ExceptionTranslationFilter@5f092eaa, org.springframework.security.web.access.intercept.AuthorizationFilter@1070308e]] (1/1)
2024-11-07T14:17:24.462+07:00 DEBUG 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing DELETE /error
2024-11-07T14:17:24.462+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:17:24.463+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:17:24.463+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:17:24.463+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:17:24.463+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:17:24.463+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:17:24.463+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:17:24.463+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:17:24.463+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:17:24.463+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:17:24.463+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:17:24.463+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:17:24.463+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:17:24.463+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:17:24.463+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] estMatcherDelegatingAuthorizationManager : Authorizing DELETE /error
2024-11-07T14:17:24.464+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] estMatcherDelegatingAuthorizationManager : Checking authorization on DELETE /error using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6c0efef
2024-11-07T14:17:24.464+07:00 TRACE 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@ec0ac1ca, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:17:24.464+07:00 DEBUG 69465 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured DELETE /error
2024-11-07T14:19:50.360+07:00  INFO 69465 --- [InvoiceManagement] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T14:19:50.362+07:00  INFO 69465 --- [InvoiceManagement] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-11-07T14:19:50.368+07:00  INFO 69465 --- [InvoiceManagement] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-11-07T14:19:53.175+07:00  INFO 69609 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : Starting InvoiceProjectApplication using Java 22.0.1 with PID 69609 (/Users/pro/Documents/Workspace/invoiceProject/target/classes started by pro in /Users/pro/Documents/Workspace/invoiceProject)
2024-11-07T14:19:53.177+07:00  INFO 69609 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : No active profile set, falling back to 1 default profile: "default"
2024-11-07T14:19:53.805+07:00  INFO 69609 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-07T14:19:53.892+07:00  INFO 69609 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 79 ms. Found 15 JPA repository interfaces.
2024-11-07T14:19:54.419+07:00  INFO 69609 --- [InvoiceManagement] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-11-07T14:19:54.432+07:00  INFO 69609 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-11-07T14:19:54.432+07:00  INFO 69609 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.26]
2024-11-07T14:19:54.484+07:00  INFO 69609 --- [InvoiceManagement] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-11-07T14:19:54.484+07:00  INFO 69609 --- [InvoiceManagement] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1268 ms
2024-11-07T14:19:54.650+07:00  INFO 69609 --- [InvoiceManagement] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-07T14:19:54.717+07:00  INFO 69609 --- [InvoiceManagement] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-11-07T14:19:54.752+07:00  INFO 69609 --- [InvoiceManagement] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-11-07T14:19:55.129+07:00  INFO 69609 --- [InvoiceManagement] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-07T14:19:55.148+07:00  INFO 69609 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-11-07T14:19:55.450+07:00  INFO 69609 --- [InvoiceManagement] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4e2109fe
2024-11-07T14:19:55.456+07:00  INFO 69609 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-11-07T14:19:56.485+07:00  INFO 69609 --- [InvoiceManagement] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-07T14:19:57.024+07:00  INFO 69609 --- [InvoiceManagement] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T14:19:57.309+07:00  INFO 69609 --- [InvoiceManagement] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-11-07T14:19:57.887+07:00  INFO 69609 --- [InvoiceManagement] [main] c.e.i.Config.ApplicationInitConfig       : Initializing Application
2024-11-07T14:19:57.915+07:00  WARN 69609 --- [InvoiceManagement] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-11-07T14:19:57.925+07:00 TRACE 69609 --- [InvoiceManagement] [main] eGlobalAuthenticationAutowiredConfigurer : Eagerly initializing {securityConfig=com.example.invoiceProject.Config.SecurityConfig$$SpringCGLIB$$0@60ab906e}
2024-11-07T14:19:57.926+07:00 DEBUG 69609 --- [InvoiceManagement] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-11-07T14:19:57.980+07:00  INFO 69609 --- [InvoiceManagement] [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-11-07T14:19:58.170+07:00 DEBUG 69609 --- [InvoiceManagement] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BearerTokenAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-11-07T14:19:58.396+07:00  INFO 69609 --- [InvoiceManagement] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2024-11-07T14:19:58.405+07:00  INFO 69609 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : Started InvoiceProjectApplication in 5.594 seconds (process running for 5.928)
2024-11-07T14:19:58.721+07:00  WARN 69609 --- [InvoiceManagement] [main] c.e.i.Config.ApplicationInitConfig       : admin user has been created with default password: admin, please change it
2024-11-07T14:19:58.721+07:00  INFO 69609 --- [InvoiceManagement] [main] c.e.i.Config.ApplicationInitConfig       : Application initialization completed .....
2024-11-07T14:21:12.782+07:00  INFO 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-07T14:21:12.782+07:00  INFO 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-11-07T14:21:12.784+07:00  INFO 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-11-07T14:21:12.794+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@3bc37090, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8861c0e, org.springframework.security.web.context.SecurityContextHolderFilter@5a4f7911, org.springframework.security.web.header.HeaderWriterFilter@1c461b90, org.springframework.web.filter.CorsFilter@2d59514f, org.springframework.security.web.authentication.logout.LogoutFilter@286e2b71, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@14d9d042, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33b3e47, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24b9c037, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5348f827, org.springframework.security.web.session.SessionManagementFilter@6e5506c9, org.springframework.security.web.access.ExceptionTranslationFilter@51e513b7, org.springframework.security.web.access.intercept.AuthorizationFilter@30c31e10]] (1/1)
2024-11-07T14:21:12.795+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /department/add
2024-11-07T14:21:12.795+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:21:12.796+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:21:12.798+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:21:12.799+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:21:12.800+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:21:12.801+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:21:12.801+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:21:12.801+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:21:12.802+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T14:21:12.833+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:21:12.834+07:00 ERROR 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception

com.example.invoiceProject.Exception.AppException: Unauthenticated
	at com.example.invoiceProject.Service.JwtService.JwtService.verifyToken(JwtService.java:94) ~[classes/:na]
	at com.example.invoiceProject.Service.AuthenticateService.introspect(AuthenticateService.java:44) ~[classes/:na]
	at com.example.invoiceProject.Config.CustomJwtDecoder.decode(CustomJwtDecoder.java:38) ~[classes/:na]
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:99) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:88) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T14:21:12.841+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@3bc37090, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8861c0e, org.springframework.security.web.context.SecurityContextHolderFilter@5a4f7911, org.springframework.security.web.header.HeaderWriterFilter@1c461b90, org.springframework.web.filter.CorsFilter@2d59514f, org.springframework.security.web.authentication.logout.LogoutFilter@286e2b71, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@14d9d042, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33b3e47, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24b9c037, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5348f827, org.springframework.security.web.session.SessionManagementFilter@6e5506c9, org.springframework.security.web.access.ExceptionTranslationFilter@51e513b7, org.springframework.security.web.access.intercept.AuthorizationFilter@30c31e10]] (1/1)
2024-11-07T14:21:12.841+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /error
2024-11-07T14:21:12.841+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:21:12.841+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:21:12.841+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:21:12.841+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:21:12.841+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:21:12.841+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:21:12.842+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:21:12.842+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:21:12.842+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:21:12.842+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:21:12.842+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:21:12.843+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:21:12.843+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2024-11-07T14:21:12.844+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]
2024-11-07T14:21:12.844+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:21:12.844+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:21:12.844+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing POST /error
2024-11-07T14:21:12.845+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /error using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6b2e3e4e
2024-11-07T14:21:12.846+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:632) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:410) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:267) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:362) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:308) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:149) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T14:21:22.336+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@3bc37090, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8861c0e, org.springframework.security.web.context.SecurityContextHolderFilter@5a4f7911, org.springframework.security.web.header.HeaderWriterFilter@1c461b90, org.springframework.web.filter.CorsFilter@2d59514f, org.springframework.security.web.authentication.logout.LogoutFilter@286e2b71, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@14d9d042, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33b3e47, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24b9c037, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5348f827, org.springframework.security.web.session.SessionManagementFilter@6e5506c9, org.springframework.security.web.access.ExceptionTranslationFilter@51e513b7, org.springframework.security.web.access.intercept.AuthorizationFilter@30c31e10]] (1/1)
2024-11-07T14:21:22.336+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /auth/token
2024-11-07T14:21:22.336+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:21:22.336+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:21:22.336+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:21:22.337+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:21:22.337+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:21:22.337+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:21:22.337+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:21:22.337+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:21:22.337+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] .s.r.w.a.BearerTokenAuthenticationFilter : Did not process request since did not find bearer token
2024-11-07T14:21:22.337+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:21:22.337+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:21:22.337+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:21:22.337+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:21:22.337+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2024-11-07T14:21:22.337+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]
2024-11-07T14:21:22.337+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:21:22.337+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:21:22.337+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing POST /auth/token
2024-11-07T14:21:22.338+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /auth/token using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x000000012fad92e8@325caf13
2024-11-07T14:21:22.338+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /auth/token
2024-11-07T14:21:22.488+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:21:36.979+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@3bc37090, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8861c0e, org.springframework.security.web.context.SecurityContextHolderFilter@5a4f7911, org.springframework.security.web.header.HeaderWriterFilter@1c461b90, org.springframework.web.filter.CorsFilter@2d59514f, org.springframework.security.web.authentication.logout.LogoutFilter@286e2b71, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@14d9d042, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33b3e47, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24b9c037, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5348f827, org.springframework.security.web.session.SessionManagementFilter@6e5506c9, org.springframework.security.web.access.ExceptionTranslationFilter@51e513b7, org.springframework.security.web.access.intercept.AuthorizationFilter@30c31e10]] (1/1)
2024-11-07T14:21:36.979+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /department/add
2024-11-07T14:21:36.979+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:21:36.979+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:21:36.979+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:21:36.979+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:21:36.980+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:21:36.980+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:21:36.980+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:21:36.980+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:21:36.980+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T14:21:36.991+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T14:21:36.991+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T14:21:36.992+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@1626b698, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:21:36.992+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:21:36.992+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:21:36.992+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:21:36.992+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:21:36.992+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@1626b698, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:21:36.992+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T14:21:36.992+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:21:36.992+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:21:36.992+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing POST /department/add
2024-11-07T14:21:36.993+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /department/add using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6b2e3e4e
2024-11-07T14:21:36.993+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /department/add
2024-11-07T14:21:37.035+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:22:30.630+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@3bc37090, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8861c0e, org.springframework.security.web.context.SecurityContextHolderFilter@5a4f7911, org.springframework.security.web.header.HeaderWriterFilter@1c461b90, org.springframework.web.filter.CorsFilter@2d59514f, org.springframework.security.web.authentication.logout.LogoutFilter@286e2b71, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@14d9d042, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33b3e47, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24b9c037, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5348f827, org.springframework.security.web.session.SessionManagementFilter@6e5506c9, org.springframework.security.web.access.ExceptionTranslationFilter@51e513b7, org.springframework.security.web.access.intercept.AuthorizationFilter@30c31e10]] (1/1)
2024-11-07T14:22:30.631+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /department/add
2024-11-07T14:22:30.631+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:22:30.631+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:22:30.631+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:22:30.631+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:22:30.631+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:22:30.631+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:22:30.631+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:22:30.631+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:22:30.631+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T14:22:30.635+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T14:22:30.635+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T14:22:30.635+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@1626b698, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:22:30.635+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:22:30.635+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:22:30.636+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:22:30.636+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:22:30.636+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@1626b698, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:22:30.636+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T14:22:30.636+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:22:30.636+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:22:30.636+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] estMatcherDelegatingAuthorizationManager : Authorizing POST /department/add
2024-11-07T14:22:30.636+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /department/add using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6b2e3e4e
2024-11-07T14:22:30.636+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /department/add
2024-11-07T14:22:30.642+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:24:22.047+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@3bc37090, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8861c0e, org.springframework.security.web.context.SecurityContextHolderFilter@5a4f7911, org.springframework.security.web.header.HeaderWriterFilter@1c461b90, org.springframework.web.filter.CorsFilter@2d59514f, org.springframework.security.web.authentication.logout.LogoutFilter@286e2b71, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@14d9d042, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33b3e47, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24b9c037, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5348f827, org.springframework.security.web.session.SessionManagementFilter@6e5506c9, org.springframework.security.web.access.ExceptionTranslationFilter@51e513b7, org.springframework.security.web.access.intercept.AuthorizationFilter@30c31e10]] (1/1)
2024-11-07T14:24:22.048+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2024-11-07T14:24:22.048+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:24:22.048+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:24:22.048+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:24:22.048+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:24:22.048+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:24:22.048+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:24:22.048+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:24:22.048+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:24:22.048+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T14:24:22.052+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T14:24:22.052+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T14:24:22.052+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@1626b698, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:24:22.052+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:24:22.052+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:24:22.052+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:24:22.052+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:24:22.052+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@1626b698, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:24:22.053+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T14:24:22.053+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:24:22.053+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:24:22.053+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/register
2024-11-07T14:24:22.053+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/register using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x000000012fad92e8@325caf13
2024-11-07T14:24:22.053+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/register
2024-11-07T14:24:22.151+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:24:30.579+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@3bc37090, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8861c0e, org.springframework.security.web.context.SecurityContextHolderFilter@5a4f7911, org.springframework.security.web.header.HeaderWriterFilter@1c461b90, org.springframework.web.filter.CorsFilter@2d59514f, org.springframework.security.web.authentication.logout.LogoutFilter@286e2b71, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@14d9d042, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33b3e47, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24b9c037, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5348f827, org.springframework.security.web.session.SessionManagementFilter@6e5506c9, org.springframework.security.web.access.ExceptionTranslationFilter@51e513b7, org.springframework.security.web.access.intercept.AuthorizationFilter@30c31e10]] (1/1)
2024-11-07T14:24:30.579+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users
2024-11-07T14:24:30.579+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:24:30.579+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:24:30.579+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:24:30.579+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:24:30.579+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:24:30.579+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:24:30.579+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:24:30.579+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:24:30.579+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T14:24:30.582+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T14:24:30.583+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T14:24:30.583+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@1626b698, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:24:30.583+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:24:30.583+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:24:30.583+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:24:30.583+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:24:30.583+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@1626b698, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:24:30.583+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T14:24:30.583+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:24:30.583+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:24:30.583+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] estMatcherDelegatingAuthorizationManager : Authorizing GET /api/users
2024-11-07T14:24:30.583+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] estMatcherDelegatingAuthorizationManager : Checking authorization on GET /api/users using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6b2e3e4e
2024-11-07T14:24:30.583+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users
2024-11-07T14:24:30.584+07:00  INFO 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] c.e.i.Controller.UserController          : UserName :  admin@gmail.com
2024-11-07T14:24:30.585+07:00  INFO 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] c.e.i.Controller.UserController          : ADMIN
2024-11-07T14:24:30.585+07:00  INFO 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] c.e.i.Controller.UserController          : USER
2024-11-07T14:24:30.601+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:50:02.045+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@3bc37090, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8861c0e, org.springframework.security.web.context.SecurityContextHolderFilter@5a4f7911, org.springframework.security.web.header.HeaderWriterFilter@1c461b90, org.springframework.web.filter.CorsFilter@2d59514f, org.springframework.security.web.authentication.logout.LogoutFilter@286e2b71, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@14d9d042, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33b3e47, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24b9c037, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5348f827, org.springframework.security.web.session.SessionManagementFilter@6e5506c9, org.springframework.security.web.access.ExceptionTranslationFilter@51e513b7, org.springframework.security.web.access.intercept.AuthorizationFilter@30c31e10]] (1/1)
2024-11-07T14:50:02.046+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /department
2024-11-07T14:50:02.046+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:50:02.046+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:50:02.046+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:50:02.046+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:50:02.046+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:50:02.046+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:50:02.046+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:50:02.046+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:50:02.046+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T14:50:02.050+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T14:50:02.050+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T14:50:02.050+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@ec0ac1ca, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:50:02.050+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:50:02.051+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:50:02.051+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:50:02.051+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:50:02.051+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@ec0ac1ca, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:50:02.051+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T14:50:02.051+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:50:02.051+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:50:02.051+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing GET /department
2024-11-07T14:50:02.051+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on GET /department using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6b2e3e4e
2024-11-07T14:50:02.051+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /department
2024-11-07T14:50:02.061+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:50:40.223+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@3bc37090, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8861c0e, org.springframework.security.web.context.SecurityContextHolderFilter@5a4f7911, org.springframework.security.web.header.HeaderWriterFilter@1c461b90, org.springframework.web.filter.CorsFilter@2d59514f, org.springframework.security.web.authentication.logout.LogoutFilter@286e2b71, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@14d9d042, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33b3e47, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24b9c037, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5348f827, org.springframework.security.web.session.SessionManagementFilter@6e5506c9, org.springframework.security.web.access.ExceptionTranslationFilter@51e513b7, org.springframework.security.web.access.intercept.AuthorizationFilter@30c31e10]] (1/1)
2024-11-07T14:50:40.223+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing DELETE /api/user/Peter@gmail.com/delete
2024-11-07T14:50:40.223+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:50:40.224+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:50:40.224+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:50:40.224+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:50:40.224+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:50:40.224+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:50:40.224+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:50:40.224+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:50:40.224+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] .s.r.w.a.BearerTokenAuthenticationFilter : Did not process request since did not find bearer token
2024-11-07T14:50:40.224+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:50:40.224+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:50:40.224+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:50:40.224+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:50:40.224+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2024-11-07T14:50:40.224+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]
2024-11-07T14:50:40.224+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:50:40.224+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:50:40.224+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing DELETE /api/user/Peter@gmail.com/delete
2024-11-07T14:50:40.225+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on DELETE /api/user/Peter@gmail.com/delete using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6b2e3e4e
2024-11-07T14:50:40.225+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:128) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T14:50:40.225+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:50:46.187+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@3bc37090, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8861c0e, org.springframework.security.web.context.SecurityContextHolderFilter@5a4f7911, org.springframework.security.web.header.HeaderWriterFilter@1c461b90, org.springframework.web.filter.CorsFilter@2d59514f, org.springframework.security.web.authentication.logout.LogoutFilter@286e2b71, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@14d9d042, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33b3e47, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24b9c037, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5348f827, org.springframework.security.web.session.SessionManagementFilter@6e5506c9, org.springframework.security.web.access.ExceptionTranslationFilter@51e513b7, org.springframework.security.web.access.intercept.AuthorizationFilter@30c31e10]] (1/1)
2024-11-07T14:50:46.187+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /auth/token
2024-11-07T14:50:46.187+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:50:46.187+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:50:46.187+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:50:46.187+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:50:46.187+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:50:46.187+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:50:46.187+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:50:46.187+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:50:46.187+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] .s.r.w.a.BearerTokenAuthenticationFilter : Did not process request since did not find bearer token
2024-11-07T14:50:46.188+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:50:46.188+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:50:46.188+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:50:46.188+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:50:46.188+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2024-11-07T14:50:46.188+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]
2024-11-07T14:50:46.188+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:50:46.188+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:50:46.188+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing POST /auth/token
2024-11-07T14:50:46.188+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /auth/token using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x000000012fad92e8@325caf13
2024-11-07T14:50:46.188+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /auth/token
2024-11-07T14:50:46.257+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:51:07.560+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@3bc37090, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8861c0e, org.springframework.security.web.context.SecurityContextHolderFilter@5a4f7911, org.springframework.security.web.header.HeaderWriterFilter@1c461b90, org.springframework.web.filter.CorsFilter@2d59514f, org.springframework.security.web.authentication.logout.LogoutFilter@286e2b71, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@14d9d042, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33b3e47, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24b9c037, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5348f827, org.springframework.security.web.session.SessionManagementFilter@6e5506c9, org.springframework.security.web.access.ExceptionTranslationFilter@51e513b7, org.springframework.security.web.access.intercept.AuthorizationFilter@30c31e10]] (1/1)
2024-11-07T14:51:07.560+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing DELETE /api/user/Peter@gmail.com/delete
2024-11-07T14:51:07.560+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:51:07.560+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:51:07.560+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:51:07.560+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:51:07.560+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:51:07.560+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:51:07.560+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:51:07.560+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:51:07.560+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T14:51:07.564+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T14:51:07.564+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T14:51:07.564+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@9ed457f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:51:07.564+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:51:07.564+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:51:07.564+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:51:07.564+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:51:07.564+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@9ed457f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:51:07.564+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T14:51:07.564+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:51:07.564+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:51:07.565+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] estMatcherDelegatingAuthorizationManager : Authorizing DELETE /api/user/Peter@gmail.com/delete
2024-11-07T14:51:07.565+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] estMatcherDelegatingAuthorizationManager : Checking authorization on DELETE /api/user/Peter@gmail.com/delete using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6b2e3e4e
2024-11-07T14:51:07.565+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured DELETE /api/user/Peter@gmail.com/delete
2024-11-07T14:51:07.583+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:51:45.078+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@3bc37090, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8861c0e, org.springframework.security.web.context.SecurityContextHolderFilter@5a4f7911, org.springframework.security.web.header.HeaderWriterFilter@1c461b90, org.springframework.web.filter.CorsFilter@2d59514f, org.springframework.security.web.authentication.logout.LogoutFilter@286e2b71, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@14d9d042, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33b3e47, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24b9c037, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5348f827, org.springframework.security.web.session.SessionManagementFilter@6e5506c9, org.springframework.security.web.access.ExceptionTranslationFilter@51e513b7, org.springframework.security.web.access.intercept.AuthorizationFilter@30c31e10]] (1/1)
2024-11-07T14:51:45.078+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /roles
2024-11-07T14:51:45.078+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:51:45.078+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:51:45.079+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:51:45.079+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:51:45.079+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:51:45.079+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:51:45.079+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:51:45.080+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:51:45.080+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T14:51:45.081+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:51:45.081+07:00 ERROR 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception

com.example.invoiceProject.Exception.AppException: Unauthenticated
	at com.example.invoiceProject.Service.JwtService.JwtService.verifyToken(JwtService.java:94) ~[classes/:na]
	at com.example.invoiceProject.Service.AuthenticateService.introspect(AuthenticateService.java:44) ~[classes/:na]
	at com.example.invoiceProject.Config.CustomJwtDecoder.decode(CustomJwtDecoder.java:38) ~[classes/:na]
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:99) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:88) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T14:51:45.084+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@3bc37090, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8861c0e, org.springframework.security.web.context.SecurityContextHolderFilter@5a4f7911, org.springframework.security.web.header.HeaderWriterFilter@1c461b90, org.springframework.web.filter.CorsFilter@2d59514f, org.springframework.security.web.authentication.logout.LogoutFilter@286e2b71, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@14d9d042, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33b3e47, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24b9c037, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5348f827, org.springframework.security.web.session.SessionManagementFilter@6e5506c9, org.springframework.security.web.access.ExceptionTranslationFilter@51e513b7, org.springframework.security.web.access.intercept.AuthorizationFilter@30c31e10]] (1/1)
2024-11-07T14:51:45.084+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /error
2024-11-07T14:51:45.084+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:51:45.084+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:51:45.084+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:51:45.084+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:51:45.084+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:51:45.084+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:51:45.084+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:51:45.084+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:51:45.084+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:51:45.085+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:51:45.085+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:51:45.085+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:51:45.085+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2024-11-07T14:51:45.085+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]
2024-11-07T14:51:45.085+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:51:45.085+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:51:45.085+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] estMatcherDelegatingAuthorizationManager : Authorizing GET /error
2024-11-07T14:51:45.086+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] estMatcherDelegatingAuthorizationManager : Checking authorization on GET /error using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6b2e3e4e
2024-11-07T14:51:45.086+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:632) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:410) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:267) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:362) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:308) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:149) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T14:51:48.131+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@3bc37090, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8861c0e, org.springframework.security.web.context.SecurityContextHolderFilter@5a4f7911, org.springframework.security.web.header.HeaderWriterFilter@1c461b90, org.springframework.web.filter.CorsFilter@2d59514f, org.springframework.security.web.authentication.logout.LogoutFilter@286e2b71, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@14d9d042, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33b3e47, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24b9c037, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5348f827, org.springframework.security.web.session.SessionManagementFilter@6e5506c9, org.springframework.security.web.access.ExceptionTranslationFilter@51e513b7, org.springframework.security.web.access.intercept.AuthorizationFilter@30c31e10]] (1/1)
2024-11-07T14:51:48.131+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users
2024-11-07T14:51:48.131+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:51:48.131+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:51:48.131+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:51:48.131+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:51:48.131+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:51:48.132+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:51:48.132+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:51:48.132+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:51:48.132+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T14:51:48.135+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T14:51:48.135+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T14:51:48.135+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@1626b698, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:51:48.135+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:51:48.135+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:51:48.135+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:51:48.135+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:51:48.135+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@1626b698, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:51:48.135+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T14:51:48.135+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:51:48.136+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:51:48.136+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] estMatcherDelegatingAuthorizationManager : Authorizing GET /api/users
2024-11-07T14:51:48.136+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] estMatcherDelegatingAuthorizationManager : Checking authorization on GET /api/users using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6b2e3e4e
2024-11-07T14:51:48.136+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users
2024-11-07T14:51:48.136+07:00  INFO 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] c.e.i.Controller.UserController          : UserName :  admin@gmail.com
2024-11-07T14:51:48.136+07:00  INFO 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] c.e.i.Controller.UserController          : ADMIN
2024-11-07T14:51:48.136+07:00  INFO 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] c.e.i.Controller.UserController          : USER
2024-11-07T14:51:48.142+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:52:03.962+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@3bc37090, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8861c0e, org.springframework.security.web.context.SecurityContextHolderFilter@5a4f7911, org.springframework.security.web.header.HeaderWriterFilter@1c461b90, org.springframework.web.filter.CorsFilter@2d59514f, org.springframework.security.web.authentication.logout.LogoutFilter@286e2b71, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@14d9d042, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33b3e47, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24b9c037, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5348f827, org.springframework.security.web.session.SessionManagementFilter@6e5506c9, org.springframework.security.web.access.ExceptionTranslationFilter@51e513b7, org.springframework.security.web.access.intercept.AuthorizationFilter@30c31e10]] (1/1)
2024-11-07T14:52:03.962+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2024-11-07T14:52:03.962+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:52:03.962+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:52:03.962+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:52:03.963+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:52:03.963+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:52:03.963+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:52:03.963+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:52:03.963+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:52:03.963+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T14:52:03.966+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T14:52:03.966+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T14:52:03.966+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@1626b698, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:52:03.966+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:52:03.966+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:52:03.966+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:52:03.966+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:52:03.966+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@1626b698, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:52:03.967+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T14:52:03.967+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:52:03.967+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:52:03.967+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/register
2024-11-07T14:52:03.967+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/register using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x000000012fad92e8@325caf13
2024-11-07T14:52:03.967+07:00 DEBUG 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/register
2024-11-07T14:52:04.039+07:00 TRACE 69609 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:56:12.175+07:00  INFO 69609 --- [InvoiceManagement] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T14:56:12.176+07:00  INFO 69609 --- [InvoiceManagement] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-11-07T14:56:12.180+07:00  INFO 69609 --- [InvoiceManagement] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-11-07T14:56:15.930+07:00  INFO 70171 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : Starting InvoiceProjectApplication using Java 22.0.1 with PID 70171 (/Users/pro/Documents/Workspace/invoiceProject/target/classes started by pro in /Users/pro/Documents/Workspace/invoiceProject)
2024-11-07T14:56:15.932+07:00  INFO 70171 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : No active profile set, falling back to 1 default profile: "default"
2024-11-07T14:56:16.527+07:00  INFO 70171 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-07T14:56:16.609+07:00  INFO 70171 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 15 JPA repository interfaces.
2024-11-07T14:56:17.125+07:00  INFO 70171 --- [InvoiceManagement] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-11-07T14:56:17.136+07:00  INFO 70171 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-11-07T14:56:17.136+07:00  INFO 70171 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.26]
2024-11-07T14:56:17.181+07:00  INFO 70171 --- [InvoiceManagement] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-11-07T14:56:17.181+07:00  INFO 70171 --- [InvoiceManagement] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1217 ms
2024-11-07T14:56:17.316+07:00  INFO 70171 --- [InvoiceManagement] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-07T14:56:17.362+07:00  INFO 70171 --- [InvoiceManagement] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-11-07T14:56:17.399+07:00  INFO 70171 --- [InvoiceManagement] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-11-07T14:56:17.646+07:00  INFO 70171 --- [InvoiceManagement] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-07T14:56:17.664+07:00  INFO 70171 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-11-07T14:56:17.939+07:00  INFO 70171 --- [InvoiceManagement] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6a6e9289
2024-11-07T14:56:17.940+07:00  INFO 70171 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-11-07T14:56:18.883+07:00  INFO 70171 --- [InvoiceManagement] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-07T14:56:18.986+07:00  INFO 70171 --- [InvoiceManagement] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T14:56:19.200+07:00  INFO 70171 --- [InvoiceManagement] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-11-07T14:56:19.836+07:00  INFO 70171 --- [InvoiceManagement] [main] c.e.i.Config.ApplicationInitConfig       : Initializing Application
2024-11-07T14:56:19.864+07:00  WARN 70171 --- [InvoiceManagement] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-11-07T14:56:19.875+07:00 TRACE 70171 --- [InvoiceManagement] [main] eGlobalAuthenticationAutowiredConfigurer : Eagerly initializing {securityConfig=com.example.invoiceProject.Config.SecurityConfig$$SpringCGLIB$$0@4e64e44c}
2024-11-07T14:56:19.876+07:00 DEBUG 70171 --- [InvoiceManagement] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-11-07T14:56:19.927+07:00  INFO 70171 --- [InvoiceManagement] [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-11-07T14:56:20.101+07:00 DEBUG 70171 --- [InvoiceManagement] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BearerTokenAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-11-07T14:56:20.327+07:00  INFO 70171 --- [InvoiceManagement] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2024-11-07T14:56:20.335+07:00  INFO 70171 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : Started InvoiceProjectApplication in 4.769 seconds (process running for 5.084)
2024-11-07T14:56:20.452+07:00  INFO 70171 --- [InvoiceManagement] [main] c.e.i.Config.ApplicationInitConfig       : Application initialization completed .....
2024-11-07T14:58:38.753+07:00  INFO 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-07T14:58:38.753+07:00  INFO 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-11-07T14:58:38.754+07:00  INFO 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-11-07T14:58:38.765+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@5cfcd612, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ecdb823, org.springframework.security.web.context.SecurityContextHolderFilter@74d6d5ca, org.springframework.security.web.header.HeaderWriterFilter@65263248, org.springframework.web.filter.CorsFilter@45c7b1d4, org.springframework.security.web.authentication.logout.LogoutFilter@3af8f1ef, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@7cf1bf54, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@40e28324, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@74239871, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@12c298e8, org.springframework.security.web.session.SessionManagementFilter@3ef2816a, org.springframework.security.web.access.ExceptionTranslationFilter@19f3c1f7, org.springframework.security.web.access.intercept.AuthorizationFilter@2667a238]] (1/1)
2024-11-07T14:58:38.766+07:00 DEBUG 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2024-11-07T14:58:38.766+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:58:38.767+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:58:38.768+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:58:38.769+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:58:38.770+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:58:38.771+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:58:38.771+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:58:38.771+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:58:38.772+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T14:58:38.813+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T14:58:38.814+07:00 DEBUG 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T14:58:38.814+07:00 DEBUG 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@1626b698, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:58:38.815+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:58:38.815+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:58:38.815+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:58:38.816+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:58:38.816+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@1626b698, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:58:38.817+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T14:58:38.817+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:58:38.817+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:58:38.818+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/register
2024-11-07T14:58:38.819+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/register using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x0000000134ae10e0@1ac5aeb
2024-11-07T14:58:38.819+07:00 DEBUG 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/register
2024-11-07T14:58:38.946+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:58:53.923+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@5cfcd612, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ecdb823, org.springframework.security.web.context.SecurityContextHolderFilter@74d6d5ca, org.springframework.security.web.header.HeaderWriterFilter@65263248, org.springframework.web.filter.CorsFilter@45c7b1d4, org.springframework.security.web.authentication.logout.LogoutFilter@3af8f1ef, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@7cf1bf54, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@40e28324, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@74239871, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@12c298e8, org.springframework.security.web.session.SessionManagementFilter@3ef2816a, org.springframework.security.web.access.ExceptionTranslationFilter@19f3c1f7, org.springframework.security.web.access.intercept.AuthorizationFilter@2667a238]] (1/1)
2024-11-07T14:58:53.923+07:00 DEBUG 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing DELETE /api/user/Peter@gmail.com/delete
2024-11-07T14:58:53.923+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:58:53.923+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:58:53.923+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:58:53.923+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:58:53.923+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:58:53.923+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:58:53.923+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:58:53.924+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:58:53.924+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T14:58:53.927+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T14:58:53.927+07:00 DEBUG 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T14:58:53.928+07:00 DEBUG 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@9ed457f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:58:53.928+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:58:53.928+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:58:53.928+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:58:53.928+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:58:53.928+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@9ed457f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:58:53.928+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T14:58:53.928+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:58:53.928+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:58:53.928+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing DELETE /api/user/Peter@gmail.com/delete
2024-11-07T14:58:53.929+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on DELETE /api/user/Peter@gmail.com/delete using org.springframework.security.authorization.AuthenticatedAuthorizationManager@32e68208
2024-11-07T14:58:53.929+07:00 DEBUG 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured DELETE /api/user/Peter@gmail.com/delete
2024-11-07T14:58:53.964+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T14:58:57.453+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@5cfcd612, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ecdb823, org.springframework.security.web.context.SecurityContextHolderFilter@74d6d5ca, org.springframework.security.web.header.HeaderWriterFilter@65263248, org.springframework.web.filter.CorsFilter@45c7b1d4, org.springframework.security.web.authentication.logout.LogoutFilter@3af8f1ef, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@7cf1bf54, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@40e28324, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@74239871, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@12c298e8, org.springframework.security.web.session.SessionManagementFilter@3ef2816a, org.springframework.security.web.access.ExceptionTranslationFilter@19f3c1f7, org.springframework.security.web.access.intercept.AuthorizationFilter@2667a238]] (1/1)
2024-11-07T14:58:57.453+07:00 DEBUG 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2024-11-07T14:58:57.454+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T14:58:57.454+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T14:58:57.454+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T14:58:57.454+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T14:58:57.454+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T14:58:57.454+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T14:58:57.454+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T14:58:57.454+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T14:58:57.454+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T14:58:57.458+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T14:58:57.458+07:00 DEBUG 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T14:58:57.458+07:00 DEBUG 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@1626b698, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:58:57.458+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T14:58:57.458+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T14:58:57.459+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T14:58:57.459+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T14:58:57.459+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@1626b698, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T14:58:57.459+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T14:58:57.459+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T14:58:57.459+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T14:58:57.459+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/register
2024-11-07T14:58:57.459+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/register using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x0000000134ae10e0@1ac5aeb
2024-11-07T14:58:57.459+07:00 DEBUG 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/register
2024-11-07T14:58:57.567+07:00 TRACE 70171 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T15:29:19.044+07:00  INFO 70171 --- [InvoiceManagement] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T15:29:19.046+07:00  INFO 70171 --- [InvoiceManagement] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-11-07T15:29:19.050+07:00  INFO 70171 --- [InvoiceManagement] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-11-07T15:29:30.500+07:00  INFO 70739 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : Starting InvoiceProjectApplication using Java 22.0.1 with PID 70739 (/Users/pro/Documents/Workspace/invoiceProject/target/classes started by pro in /Users/pro/Documents/Workspace/invoiceProject)
2024-11-07T15:29:30.502+07:00  INFO 70739 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : No active profile set, falling back to 1 default profile: "default"
2024-11-07T15:29:31.143+07:00  INFO 70739 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-07T15:29:31.229+07:00  INFO 70739 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 80 ms. Found 15 JPA repository interfaces.
2024-11-07T15:29:31.863+07:00  INFO 70739 --- [InvoiceManagement] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-11-07T15:29:31.876+07:00  INFO 70739 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-11-07T15:29:31.876+07:00  INFO 70739 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.26]
2024-11-07T15:29:31.928+07:00  INFO 70739 --- [InvoiceManagement] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-11-07T15:29:31.928+07:00  INFO 70739 --- [InvoiceManagement] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1386 ms
2024-11-07T15:29:32.092+07:00  INFO 70739 --- [InvoiceManagement] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-07T15:29:32.151+07:00  INFO 70739 --- [InvoiceManagement] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-11-07T15:29:32.180+07:00  INFO 70739 --- [InvoiceManagement] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-11-07T15:29:32.495+07:00  INFO 70739 --- [InvoiceManagement] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-07T15:29:32.517+07:00  INFO 70739 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-11-07T15:29:32.831+07:00  INFO 70739 --- [InvoiceManagement] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@61554b6b
2024-11-07T15:29:32.833+07:00  INFO 70739 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-11-07T15:29:33.812+07:00  INFO 70739 --- [InvoiceManagement] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-07T15:29:33.927+07:00  INFO 70739 --- [InvoiceManagement] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T15:29:34.192+07:00  INFO 70739 --- [InvoiceManagement] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-11-07T15:29:34.602+07:00  WARN 70739 --- [InvoiceManagement] [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'departmentController': Unsatisfied dependency expressed through field 'departmentService': Error creating bean with name 'departmentService': Unsatisfied dependency expressed through field 'mapper': Error creating bean with name 'modelMapper' defined in class path resource [com/example/invoiceProject/Mapper/ModelMapperConfig.class]: Failed to instantiate [org.modelmapper.ModelMapper]: Factory method 'modelMapper' threw exception with message: ModelMapper configuration errors:

1) Failed to configure mappings

1 error
2024-11-07T15:29:34.602+07:00  INFO 70739 --- [InvoiceManagement] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T15:29:34.603+07:00  INFO 70739 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-11-07T15:29:34.612+07:00  INFO 70739 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-11-07T15:29:34.613+07:00  INFO 70739 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2024-11-07T15:29:34.622+07:00  INFO 70739 --- [InvoiceManagement] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-11-07T15:29:34.640+07:00 ERROR 70739 --- [InvoiceManagement] [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'departmentController': Unsatisfied dependency expressed through field 'departmentService': Error creating bean with name 'departmentService': Unsatisfied dependency expressed through field 'mapper': Error creating bean with name 'modelMapper' defined in class path resource [com/example/invoiceProject/Mapper/ModelMapperConfig.class]: Failed to instantiate [org.modelmapper.ModelMapper]: Factory method 'modelMapper' threw exception with message: ModelMapper configuration errors:

1) Failed to configure mappings

1 error
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1439) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:971) ~[spring-context-6.1.11.jar:6.1.11]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:625) ~[spring-context-6.1.11.jar:6.1.11]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.2.jar:3.3.2]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.2.jar:3.3.2]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.2.jar:3.3.2]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.2.jar:3.3.2]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.2.jar:3.3.2]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.2.jar:3.3.2]
	at com.example.invoiceProject.InvoiceProjectApplication.main(InvoiceProjectApplication.java:12) ~[classes/:na]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'departmentService': Unsatisfied dependency expressed through field 'mapper': Error creating bean with name 'modelMapper' defined in class path resource [com/example/invoiceProject/Mapper/ModelMapperConfig.class]: Failed to instantiate [org.modelmapper.ModelMapper]: Factory method 'modelMapper' threw exception with message: ModelMapper configuration errors:

1) Failed to configure mappings

1 error
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1439) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784) ~[spring-beans-6.1.11.jar:6.1.11]
	... 20 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'modelMapper' defined in class path resource [com/example/invoiceProject/Mapper/ModelMapperConfig.class]: Failed to instantiate [org.modelmapper.ModelMapper]: Factory method 'modelMapper' threw exception with message: ModelMapper configuration errors:

1) Failed to configure mappings

1 error
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:485) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1185) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784) ~[spring-beans-6.1.11.jar:6.1.11]
	... 34 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.modelmapper.ModelMapper]: Factory method 'modelMapper' threw exception with message: ModelMapper configuration errors:

1) Failed to configure mappings

1 error
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:178) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:644) ~[spring-beans-6.1.11.jar:6.1.11]
	... 47 common frames omitted
Caused by: org.modelmapper.ConfigurationException: ModelMapper configuration errors:

1) Failed to configure mappings

1 error
	at org.modelmapper.internal.Errors.throwConfigurationExceptionIfErrorsExist(Errors.java:240) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.internal.ExplicitMappingBuilder.build(ExplicitMappingBuilder.java:252) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.internal.ExplicitMappingBuilder.build(ExplicitMappingBuilder.java:104) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.internal.TypeMapImpl.addMappings(TypeMapImpl.java:92) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.internal.TypeMapStore.getOrCreate(TypeMapStore.java:127) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.ModelMapper.addMappings(ModelMapper.java:113) ~[modelmapper-3.1.1.jar:na]
	at com.example.invoiceProject.Mapper.ModelMapperConfig.modelMapper(ModelMapperConfig.java:26) ~[classes/:na]
	at com.example.invoiceProject.Mapper.ModelMapperConfig$$SpringCGLIB$$0.CGLIB$modelMapper$0(<generated>) ~[classes/:na]
	at com.example.invoiceProject.Mapper.ModelMapperConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258) ~[spring-core-6.1.11.jar:6.1.11]
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:348) ~[spring-context-6.1.11.jar:6.1.11]
	at com.example.invoiceProject.Mapper.ModelMapperConfig$$SpringCGLIB$$0.modelMapper(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:146) ~[spring-beans-6.1.11.jar:6.1.11]
	... 48 common frames omitted
Caused by: java.lang.IllegalArgumentException: Unsupported class file major version 65
	at org.modelmapper.internal.asm.ClassReader.<init>(ClassReader.java:199) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.internal.asm.ClassReader.<init>(ClassReader.java:180) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.internal.asm.ClassReader.<init>(ClassReader.java:166) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.internal.asm.ClassReader.<init>(ClassReader.java:287) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.internal.ExplicitMappingBuilder.visitPropertyMap(ExplicitMappingBuilder.java:263) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.PropertyMap.configure(PropertyMap.java:386) ~[modelmapper-3.1.1.jar:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.modelmapper.internal.ExplicitMappingBuilder.build(ExplicitMappingBuilder.java:235) ~[modelmapper-3.1.1.jar:na]
	... 61 common frames omitted

2024-11-07T15:35:48.607+07:00  INFO 70828 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : Starting InvoiceProjectApplication using Java 22.0.1 with PID 70828 (/Users/pro/Documents/Workspace/invoiceProject/target/classes started by pro in /Users/pro/Documents/Workspace/invoiceProject)
2024-11-07T15:35:48.609+07:00  INFO 70828 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : No active profile set, falling back to 1 default profile: "default"
2024-11-07T15:35:49.213+07:00  INFO 70828 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-07T15:35:49.298+07:00  INFO 70828 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 79 ms. Found 15 JPA repository interfaces.
2024-11-07T15:35:49.806+07:00  INFO 70828 --- [InvoiceManagement] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-11-07T15:35:49.816+07:00  INFO 70828 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-11-07T15:35:49.817+07:00  INFO 70828 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.26]
2024-11-07T15:35:49.859+07:00  INFO 70828 --- [InvoiceManagement] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-11-07T15:35:49.859+07:00  INFO 70828 --- [InvoiceManagement] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1216 ms
2024-11-07T15:35:49.994+07:00  INFO 70828 --- [InvoiceManagement] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-07T15:35:50.039+07:00  INFO 70828 --- [InvoiceManagement] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-11-07T15:35:50.074+07:00  INFO 70828 --- [InvoiceManagement] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-11-07T15:35:50.340+07:00  INFO 70828 --- [InvoiceManagement] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-07T15:35:50.360+07:00  INFO 70828 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-11-07T15:35:50.666+07:00  INFO 70828 --- [InvoiceManagement] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@61554b6b
2024-11-07T15:35:50.668+07:00  INFO 70828 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-11-07T15:35:51.667+07:00  INFO 70828 --- [InvoiceManagement] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-07T15:35:51.783+07:00  INFO 70828 --- [InvoiceManagement] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T15:35:52.073+07:00  INFO 70828 --- [InvoiceManagement] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-11-07T15:35:52.499+07:00  WARN 70828 --- [InvoiceManagement] [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'departmentController': Unsatisfied dependency expressed through field 'departmentService': Error creating bean with name 'departmentService': Unsatisfied dependency expressed through field 'mapper': Error creating bean with name 'modelMapper' defined in class path resource [com/example/invoiceProject/Mapper/ModelMapperConfig.class]: Failed to instantiate [org.modelmapper.ModelMapper]: Factory method 'modelMapper' threw exception with message: ModelMapper configuration errors:

1) Failed to configure mappings

1 error
2024-11-07T15:35:52.500+07:00  INFO 70828 --- [InvoiceManagement] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T15:35:52.501+07:00  INFO 70828 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-11-07T15:35:52.509+07:00  INFO 70828 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-11-07T15:35:52.510+07:00  INFO 70828 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2024-11-07T15:35:52.519+07:00  INFO 70828 --- [InvoiceManagement] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-11-07T15:35:52.532+07:00 ERROR 70828 --- [InvoiceManagement] [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'departmentController': Unsatisfied dependency expressed through field 'departmentService': Error creating bean with name 'departmentService': Unsatisfied dependency expressed through field 'mapper': Error creating bean with name 'modelMapper' defined in class path resource [com/example/invoiceProject/Mapper/ModelMapperConfig.class]: Failed to instantiate [org.modelmapper.ModelMapper]: Factory method 'modelMapper' threw exception with message: ModelMapper configuration errors:

1) Failed to configure mappings

1 error
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1439) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:971) ~[spring-context-6.1.11.jar:6.1.11]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:625) ~[spring-context-6.1.11.jar:6.1.11]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.2.jar:3.3.2]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.2.jar:3.3.2]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.2.jar:3.3.2]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.2.jar:3.3.2]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.2.jar:3.3.2]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.2.jar:3.3.2]
	at com.example.invoiceProject.InvoiceProjectApplication.main(InvoiceProjectApplication.java:12) ~[classes/:na]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'departmentService': Unsatisfied dependency expressed through field 'mapper': Error creating bean with name 'modelMapper' defined in class path resource [com/example/invoiceProject/Mapper/ModelMapperConfig.class]: Failed to instantiate [org.modelmapper.ModelMapper]: Factory method 'modelMapper' threw exception with message: ModelMapper configuration errors:

1) Failed to configure mappings

1 error
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1439) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784) ~[spring-beans-6.1.11.jar:6.1.11]
	... 20 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'modelMapper' defined in class path resource [com/example/invoiceProject/Mapper/ModelMapperConfig.class]: Failed to instantiate [org.modelmapper.ModelMapper]: Factory method 'modelMapper' threw exception with message: ModelMapper configuration errors:

1) Failed to configure mappings

1 error
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:485) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1185) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784) ~[spring-beans-6.1.11.jar:6.1.11]
	... 34 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.modelmapper.ModelMapper]: Factory method 'modelMapper' threw exception with message: ModelMapper configuration errors:

1) Failed to configure mappings

1 error
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:178) ~[spring-beans-6.1.11.jar:6.1.11]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:644) ~[spring-beans-6.1.11.jar:6.1.11]
	... 47 common frames omitted
Caused by: org.modelmapper.ConfigurationException: ModelMapper configuration errors:

1) Failed to configure mappings

1 error
	at org.modelmapper.internal.Errors.throwConfigurationExceptionIfErrorsExist(Errors.java:240) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.internal.ExplicitMappingBuilder.build(ExplicitMappingBuilder.java:252) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.internal.ExplicitMappingBuilder.build(ExplicitMappingBuilder.java:104) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.internal.TypeMapImpl.addMappings(TypeMapImpl.java:92) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.internal.TypeMapStore.getOrCreate(TypeMapStore.java:127) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.ModelMapper.addMappings(ModelMapper.java:113) ~[modelmapper-3.1.1.jar:na]
	at com.example.invoiceProject.Mapper.ModelMapperConfig.modelMapper(ModelMapperConfig.java:26) ~[classes/:na]
	at com.example.invoiceProject.Mapper.ModelMapperConfig$$SpringCGLIB$$0.CGLIB$modelMapper$0(<generated>) ~[classes/:na]
	at com.example.invoiceProject.Mapper.ModelMapperConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258) ~[spring-core-6.1.11.jar:6.1.11]
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:348) ~[spring-context-6.1.11.jar:6.1.11]
	at com.example.invoiceProject.Mapper.ModelMapperConfig$$SpringCGLIB$$0.modelMapper(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:146) ~[spring-beans-6.1.11.jar:6.1.11]
	... 48 common frames omitted
Caused by: java.lang.IllegalArgumentException: Unsupported class file major version 65
	at org.modelmapper.internal.asm.ClassReader.<init>(ClassReader.java:199) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.internal.asm.ClassReader.<init>(ClassReader.java:180) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.internal.asm.ClassReader.<init>(ClassReader.java:166) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.internal.asm.ClassReader.<init>(ClassReader.java:287) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.internal.ExplicitMappingBuilder.visitPropertyMap(ExplicitMappingBuilder.java:263) ~[modelmapper-3.1.1.jar:na]
	at org.modelmapper.PropertyMap.configure(PropertyMap.java:386) ~[modelmapper-3.1.1.jar:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.modelmapper.internal.ExplicitMappingBuilder.build(ExplicitMappingBuilder.java:235) ~[modelmapper-3.1.1.jar:na]
	... 61 common frames omitted

2024-11-07T15:39:18.090+07:00  INFO 70880 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : Starting InvoiceProjectApplication using Java 22.0.1 with PID 70880 (/Users/pro/Documents/Workspace/invoiceProject/target/classes started by pro in /Users/pro/Documents/Workspace/invoiceProject)
2024-11-07T15:39:18.092+07:00  INFO 70880 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : No active profile set, falling back to 1 default profile: "default"
2024-11-07T15:39:18.699+07:00  INFO 70880 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-07T15:39:18.782+07:00  INFO 70880 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 76 ms. Found 15 JPA repository interfaces.
2024-11-07T15:39:19.294+07:00  INFO 70880 --- [InvoiceManagement] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-11-07T15:39:19.306+07:00  INFO 70880 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-11-07T15:39:19.306+07:00  INFO 70880 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.26]
2024-11-07T15:39:19.358+07:00  INFO 70880 --- [InvoiceManagement] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-11-07T15:39:19.358+07:00  INFO 70880 --- [InvoiceManagement] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1232 ms
2024-11-07T15:39:19.500+07:00  INFO 70880 --- [InvoiceManagement] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-07T15:39:19.556+07:00  INFO 70880 --- [InvoiceManagement] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-11-07T15:39:19.592+07:00  INFO 70880 --- [InvoiceManagement] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-11-07T15:39:19.847+07:00  INFO 70880 --- [InvoiceManagement] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-07T15:39:19.867+07:00  INFO 70880 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-11-07T15:39:20.156+07:00  INFO 70880 --- [InvoiceManagement] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@26101efc
2024-11-07T15:39:20.158+07:00  INFO 70880 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-11-07T15:39:21.112+07:00  INFO 70880 --- [InvoiceManagement] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-07T15:39:21.216+07:00  INFO 70880 --- [InvoiceManagement] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T15:39:21.482+07:00  INFO 70880 --- [InvoiceManagement] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-11-07T15:39:22.058+07:00  INFO 70880 --- [InvoiceManagement] [main] c.e.i.Config.ApplicationInitConfig       : Initializing Application
2024-11-07T15:39:22.088+07:00  WARN 70880 --- [InvoiceManagement] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-11-07T15:39:22.099+07:00 TRACE 70880 --- [InvoiceManagement] [main] eGlobalAuthenticationAutowiredConfigurer : Eagerly initializing {securityConfig=com.example.invoiceProject.Config.SecurityConfig$$SpringCGLIB$$0@6245303e}
2024-11-07T15:39:22.101+07:00 DEBUG 70880 --- [InvoiceManagement] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-11-07T15:39:22.155+07:00  INFO 70880 --- [InvoiceManagement] [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-11-07T15:39:22.356+07:00 DEBUG 70880 --- [InvoiceManagement] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BearerTokenAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-11-07T15:39:22.606+07:00  INFO 70880 --- [InvoiceManagement] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2024-11-07T15:39:22.615+07:00  INFO 70880 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : Started InvoiceProjectApplication in 4.941 seconds (process running for 5.272)
2024-11-07T15:39:22.740+07:00  INFO 70880 --- [InvoiceManagement] [main] c.e.i.Config.ApplicationInitConfig       : Application initialization completed .....
2024-11-07T15:41:49.775+07:00  INFO 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-07T15:41:49.775+07:00  INFO 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-11-07T15:41:49.777+07:00  INFO 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-11-07T15:41:49.790+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:41:49.790+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2024-11-07T15:41:49.791+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:41:49.791+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:41:49.793+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:41:49.793+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:41:49.794+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:41:49.795+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:41:49.795+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:41:49.795+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:41:49.796+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T15:41:49.830+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T15:41:49.830+07:00 ERROR 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception

com.example.invoiceProject.Exception.AppException: Unauthenticated
	at com.example.invoiceProject.Service.JwtService.JwtService.verifyToken(JwtService.java:94) ~[classes/:na]
	at com.example.invoiceProject.Service.AuthenticateService.introspect(AuthenticateService.java:44) ~[classes/:na]
	at com.example.invoiceProject.Config.CustomJwtDecoder.decode(CustomJwtDecoder.java:38) ~[classes/:na]
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:99) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:88) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T15:41:49.837+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:41:49.837+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /error
2024-11-07T15:41:49.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:41:49.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:41:49.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:41:49.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:41:49.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:41:49.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:41:49.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:41:49.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:41:49.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:41:49.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:41:49.839+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:41:49.839+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:41:49.840+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2024-11-07T15:41:49.840+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]
2024-11-07T15:41:49.840+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:41:49.840+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:41:49.841+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] estMatcherDelegatingAuthorizationManager : Authorizing POST /error
2024-11-07T15:41:49.841+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /error using org.springframework.security.authorization.AuthenticatedAuthorizationManager@62baeae3
2024-11-07T15:41:49.842+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:632) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:410) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:267) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:362) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:308) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:149) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T15:42:04.698+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:42:04.698+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2024-11-07T15:42:04.698+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:42:04.698+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:42:04.698+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:42:04.698+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:42:04.698+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:42:04.699+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:42:04.699+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:42:04.699+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:42:04.699+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T15:42:04.711+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T15:42:04.712+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T15:42:04.712+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@9ed457f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:42:04.712+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:42:04.712+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:42:04.712+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:42:04.712+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:42:04.712+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@9ed457f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:42:04.713+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T15:42:04.713+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:42:04.713+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:42:04.713+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/register
2024-11-07T15:42:04.713+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/register using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x0000000135ada620@771ff8df
2024-11-07T15:42:04.713+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/register
2024-11-07T15:42:05.021+07:00  WARN 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2024-11-07T15:42:05.022+07:00 ERROR 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry '1' for key 'user.UKtb5gq05t7xhddh2idsdy8ddd'
2024-11-07T15:42:05.031+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T15:42:05.031+07:00 ERROR 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry '1' for key 'user.UKtb5gq05t7xhddh2idsdy8ddd'] [insert into user (created_at,department_id,email,first_name,last_name,password,updated_at,id) values (?,?,?,?,?,?,?,?)]; SQL [insert into user (created_at,department_id,email,first_name,last_name,password,updated_at,id) values (?,?,?,?,?,?,?,?)]; constraint [user.UKtb5gq05t7xhddh2idsdy8ddd]] with root cause

java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'user.UKtb5gq05t7xhddh2idsdy8ddd'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:118) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:912) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1054) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1003) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1312) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:988) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:na]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:134) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:55) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:104) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:110) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:632) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:499) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:371) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:41) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1425) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:487) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2324) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1981) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562) ~[spring-orm-6.1.11.jar:6.1.11]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:795) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:758) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:663) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:413) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.11.jar:6.1.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768) ~[spring-aop-6.1.11.jar:6.1.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720) ~[spring-aop-6.1.11.jar:6.1.11]
	at com.example.invoiceProject.Service.UserService$$SpringCGLIB$$0.createUser(<generated>) ~[classes/:na]
	at com.example.invoiceProject.Controller.UserController.createUser(UserController.java:40) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:145) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T15:42:05.034+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:42:05.034+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /error
2024-11-07T15:42:05.034+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:42:05.035+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:42:05.035+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:42:05.035+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:42:05.035+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:42:05.035+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:42:05.035+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:42:05.035+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:42:05.035+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:42:05.036+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:42:05.036+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:42:05.036+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:42:05.036+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:42:05.036+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:42:05.036+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing POST /error
2024-11-07T15:42:05.036+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /error using org.springframework.security.authorization.AuthenticatedAuthorizationManager@62baeae3
2024-11-07T15:42:05.036+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@9ed457f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:42:05.036+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /error
2024-11-07T15:42:11.371+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:42:11.371+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /auth/token
2024-11-07T15:42:11.371+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:42:11.371+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:42:11.371+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:42:11.372+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:42:11.372+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:42:11.372+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:42:11.372+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:42:11.372+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:42:11.372+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Did not process request since did not find bearer token
2024-11-07T15:42:11.372+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:42:11.372+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:42:11.372+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:42:11.372+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:42:11.372+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2024-11-07T15:42:11.372+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]
2024-11-07T15:42:11.372+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:42:11.373+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:42:11.373+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] estMatcherDelegatingAuthorizationManager : Authorizing POST /auth/token
2024-11-07T15:42:11.373+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /auth/token using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x0000000135ada620@771ff8df
2024-11-07T15:42:11.373+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /auth/token
2024-11-07T15:42:11.456+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T15:42:32.479+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:42:32.479+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2024-11-07T15:42:32.479+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:42:32.479+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:42:32.479+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:42:32.479+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:42:32.480+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:42:32.480+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:42:32.480+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:42:32.480+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:42:32.480+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T15:42:32.484+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T15:42:32.484+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T15:42:32.484+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:42:32.485+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:42:32.485+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:42:32.485+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:42:32.485+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:42:32.485+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:42:32.485+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T15:42:32.485+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:42:32.485+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:42:32.485+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/register
2024-11-07T15:42:32.485+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/register using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x0000000135ada620@771ff8df
2024-11-07T15:42:32.485+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/register
2024-11-07T15:42:32.557+07:00  WARN 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2024-11-07T15:42:32.557+07:00 ERROR 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry '1' for key 'user.UKtb5gq05t7xhddh2idsdy8ddd'
2024-11-07T15:42:32.559+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T15:42:32.559+07:00 ERROR 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry '1' for key 'user.UKtb5gq05t7xhddh2idsdy8ddd'] [insert into user (created_at,department_id,email,first_name,last_name,password,updated_at,id) values (?,?,?,?,?,?,?,?)]; SQL [insert into user (created_at,department_id,email,first_name,last_name,password,updated_at,id) values (?,?,?,?,?,?,?,?)]; constraint [user.UKtb5gq05t7xhddh2idsdy8ddd]] with root cause

java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'user.UKtb5gq05t7xhddh2idsdy8ddd'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:118) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:912) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1054) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1003) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1312) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:988) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:na]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:134) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:55) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:104) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:110) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:632) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:499) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:371) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:41) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1425) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:487) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2324) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1981) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562) ~[spring-orm-6.1.11.jar:6.1.11]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:795) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:758) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:663) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:413) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.11.jar:6.1.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768) ~[spring-aop-6.1.11.jar:6.1.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720) ~[spring-aop-6.1.11.jar:6.1.11]
	at com.example.invoiceProject.Service.UserService$$SpringCGLIB$$0.createUser(<generated>) ~[classes/:na]
	at com.example.invoiceProject.Controller.UserController.createUser(UserController.java:40) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:145) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T15:42:32.561+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:42:32.561+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /error
2024-11-07T15:42:32.561+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:42:32.561+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:42:32.561+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:42:32.561+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:42:32.561+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:42:32.561+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:42:32.561+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:42:32.561+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:42:32.561+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:42:32.561+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:42:32.562+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:42:32.562+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:42:32.562+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:42:32.562+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:42:32.562+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] estMatcherDelegatingAuthorizationManager : Authorizing POST /error
2024-11-07T15:42:32.562+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /error using org.springframework.security.authorization.AuthenticatedAuthorizationManager@62baeae3
2024-11-07T15:42:32.562+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:42:32.562+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /error
2024-11-07T15:43:01.548+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:43:01.548+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users
2024-11-07T15:43:01.548+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:43:01.548+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:43:01.549+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:43:01.549+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:43:01.549+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:43:01.549+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:43:01.549+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:43:01.549+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:43:01.549+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T15:43:01.553+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T15:43:01.553+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T15:43:01.553+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:43:01.553+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:43:01.553+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:43:01.553+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:43:01.553+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:43:01.554+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:43:01.554+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T15:43:01.554+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:43:01.554+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:43:01.554+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] estMatcherDelegatingAuthorizationManager : Authorizing GET /api/users
2024-11-07T15:43:01.554+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] estMatcherDelegatingAuthorizationManager : Checking authorization on GET /api/users using org.springframework.security.authorization.AuthenticatedAuthorizationManager@62baeae3
2024-11-07T15:43:01.554+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users
2024-11-07T15:43:01.555+07:00  INFO 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] c.e.i.Controller.UserController          : UserName :  admin@gmail.com
2024-11-07T15:43:01.555+07:00  INFO 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] c.e.i.Controller.UserController          : ADMIN
2024-11-07T15:43:01.555+07:00  INFO 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] c.e.i.Controller.UserController          : USER
2024-11-07T15:43:01.578+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T15:43:29.353+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:43:29.353+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2024-11-07T15:43:29.353+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:43:29.353+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:43:29.353+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:43:29.353+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:43:29.353+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:43:29.354+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:43:29.354+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:43:29.354+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:43:29.354+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T15:43:29.358+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T15:43:29.358+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T15:43:29.358+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:43:29.358+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:43:29.358+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:43:29.358+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:43:29.358+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:43:29.358+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:43:29.359+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T15:43:29.359+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:43:29.359+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:43:29.359+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/register
2024-11-07T15:43:29.359+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/register using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x0000000135ada620@771ff8df
2024-11-07T15:43:29.359+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/register
2024-11-07T15:43:29.430+07:00  WARN 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2024-11-07T15:43:29.430+07:00 ERROR 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry '1' for key 'user.UKtb5gq05t7xhddh2idsdy8ddd'
2024-11-07T15:43:29.432+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T15:43:29.433+07:00 ERROR 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry '1' for key 'user.UKtb5gq05t7xhddh2idsdy8ddd'] [insert into user (created_at,department_id,email,first_name,last_name,password,updated_at,id) values (?,?,?,?,?,?,?,?)]; SQL [insert into user (created_at,department_id,email,first_name,last_name,password,updated_at,id) values (?,?,?,?,?,?,?,?)]; constraint [user.UKtb5gq05t7xhddh2idsdy8ddd]] with root cause

java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'user.UKtb5gq05t7xhddh2idsdy8ddd'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:118) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:912) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1054) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1003) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1312) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:988) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:na]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:134) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:55) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:104) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:110) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:632) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:499) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:371) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:41) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1425) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:487) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2324) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1981) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562) ~[spring-orm-6.1.11.jar:6.1.11]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:795) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:758) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:663) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:413) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.11.jar:6.1.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768) ~[spring-aop-6.1.11.jar:6.1.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720) ~[spring-aop-6.1.11.jar:6.1.11]
	at com.example.invoiceProject.Service.UserService$$SpringCGLIB$$0.createUser(<generated>) ~[classes/:na]
	at com.example.invoiceProject.Controller.UserController.createUser(UserController.java:40) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:145) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T15:43:29.434+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:43:29.434+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /error
2024-11-07T15:43:29.434+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:43:29.434+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:43:29.434+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:43:29.435+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:43:29.435+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:43:29.435+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:43:29.435+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:43:29.435+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:43:29.435+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:43:29.435+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:43:29.435+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:43:29.435+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:43:29.435+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:43:29.435+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:43:29.435+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] estMatcherDelegatingAuthorizationManager : Authorizing POST /error
2024-11-07T15:43:29.435+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /error using org.springframework.security.authorization.AuthenticatedAuthorizationManager@62baeae3
2024-11-07T15:43:29.436+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:43:29.436+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /error
2024-11-07T15:43:56.233+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:43:56.233+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2024-11-07T15:43:56.233+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:43:56.233+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:43:56.233+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:43:56.233+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:43:56.233+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:43:56.233+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:43:56.233+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:43:56.233+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:43:56.234+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T15:43:56.237+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T15:43:56.237+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T15:43:56.237+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:43:56.237+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:43:56.237+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:43:56.237+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:43:56.237+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:43:56.237+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:43:56.238+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T15:43:56.238+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:43:56.238+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:43:56.238+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/register
2024-11-07T15:43:56.238+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/register using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x0000000135ada620@771ff8df
2024-11-07T15:43:56.238+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/register
2024-11-07T15:43:56.309+07:00  WARN 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2024-11-07T15:43:56.309+07:00 ERROR 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry '1' for key 'user.UKtb5gq05t7xhddh2idsdy8ddd'
2024-11-07T15:43:56.311+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T15:43:56.311+07:00 ERROR 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry '1' for key 'user.UKtb5gq05t7xhddh2idsdy8ddd'] [insert into user (created_at,department_id,email,first_name,last_name,password,updated_at,id) values (?,?,?,?,?,?,?,?)]; SQL [insert into user (created_at,department_id,email,first_name,last_name,password,updated_at,id) values (?,?,?,?,?,?,?,?)]; constraint [user.UKtb5gq05t7xhddh2idsdy8ddd]] with root cause

java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'user.UKtb5gq05t7xhddh2idsdy8ddd'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:118) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:912) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1054) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1003) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1312) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:988) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:na]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:134) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:55) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:104) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:110) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:632) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:499) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:371) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:41) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1425) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:487) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2324) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1981) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562) ~[spring-orm-6.1.11.jar:6.1.11]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:795) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:758) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:663) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:413) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.11.jar:6.1.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768) ~[spring-aop-6.1.11.jar:6.1.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720) ~[spring-aop-6.1.11.jar:6.1.11]
	at com.example.invoiceProject.Service.UserService$$SpringCGLIB$$0.createUser(<generated>) ~[classes/:na]
	at com.example.invoiceProject.Controller.UserController.createUser(UserController.java:40) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:145) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T15:43:56.312+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:43:56.312+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /error
2024-11-07T15:43:56.312+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:43:56.312+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:43:56.313+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:43:56.313+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:43:56.313+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:43:56.313+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:43:56.313+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:43:56.313+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:43:56.313+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:43:56.313+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:43:56.313+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:43:56.313+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:43:56.313+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:43:56.313+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:43:56.313+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing POST /error
2024-11-07T15:43:56.313+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /error using org.springframework.security.authorization.AuthenticatedAuthorizationManager@62baeae3
2024-11-07T15:43:56.313+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:43:56.313+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /error
2024-11-07T15:44:43.951+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:44:43.951+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /department
2024-11-07T15:44:43.951+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:44:43.952+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:44:43.952+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:44:43.952+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:44:43.952+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:44:43.952+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:44:43.952+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:44:43.952+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:44:43.952+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T15:44:43.953+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T15:44:43.953+07:00 ERROR 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception

com.example.invoiceProject.Exception.AppException: Unauthenticated
	at com.example.invoiceProject.Service.JwtService.JwtService.verifyToken(JwtService.java:94) ~[classes/:na]
	at com.example.invoiceProject.Service.AuthenticateService.introspect(AuthenticateService.java:44) ~[classes/:na]
	at com.example.invoiceProject.Config.CustomJwtDecoder.decode(CustomJwtDecoder.java:38) ~[classes/:na]
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:99) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:88) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T15:44:43.954+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:44:43.954+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /error
2024-11-07T15:44:43.954+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:44:43.954+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:44:43.954+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:44:43.954+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:44:43.954+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:44:43.954+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:44:43.954+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:44:43.954+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:44:43.954+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:44:43.954+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:44:43.954+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:44:43.955+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:44:43.955+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2024-11-07T15:44:43.955+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]
2024-11-07T15:44:43.955+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:44:43.955+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:44:43.955+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing GET /error
2024-11-07T15:44:43.955+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on GET /error using org.springframework.security.authorization.AuthenticatedAuthorizationManager@62baeae3
2024-11-07T15:44:43.955+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:632) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:410) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:267) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:362) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:308) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:149) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T15:44:57.861+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:44:57.861+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /department
2024-11-07T15:44:57.861+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:44:57.861+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:44:57.861+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:44:57.861+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:44:57.861+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:44:57.861+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:44:57.861+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:44:57.861+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:44:57.861+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T15:44:57.865+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T15:44:57.865+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T15:44:57.865+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:44:57.865+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:44:57.865+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:44:57.866+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:44:57.866+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:44:57.866+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:44:57.866+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T15:44:57.866+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:44:57.866+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:44:57.866+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing GET /department
2024-11-07T15:44:57.866+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on GET /department using org.springframework.security.authorization.AuthenticatedAuthorizationManager@62baeae3
2024-11-07T15:44:57.866+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /department
2024-11-07T15:44:57.872+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T15:45:22.716+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:45:22.717+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing DELETE /api/user/Peter@gmail.com/delete
2024-11-07T15:45:22.717+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:45:22.717+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:45:22.717+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:45:22.717+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:45:22.717+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:45:22.717+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:45:22.717+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:45:22.717+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:45:22.717+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T15:45:22.721+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T15:45:22.721+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T15:45:22.721+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@9ed457f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:45:22.721+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:45:22.721+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:45:22.721+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:45:22.721+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:45:22.721+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@9ed457f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:45:22.721+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T15:45:22.721+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:45:22.721+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:45:22.721+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] estMatcherDelegatingAuthorizationManager : Authorizing DELETE /api/user/Peter@gmail.com/delete
2024-11-07T15:45:22.721+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] estMatcherDelegatingAuthorizationManager : Checking authorization on DELETE /api/user/Peter@gmail.com/delete using org.springframework.security.authorization.AuthenticatedAuthorizationManager@62baeae3
2024-11-07T15:45:22.721+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured DELETE /api/user/Peter@gmail.com/delete
2024-11-07T15:45:22.742+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T15:45:26.649+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:45:26.650+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users
2024-11-07T15:45:26.650+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:45:26.650+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:45:26.650+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:45:26.650+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:45:26.650+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:45:26.650+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:45:26.650+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:45:26.650+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:45:26.650+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T15:45:26.654+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T15:45:26.654+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T15:45:26.654+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:45:26.654+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:45:26.654+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:45:26.654+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:45:26.654+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:45:26.654+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:45:26.654+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T15:45:26.654+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:45:26.654+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:45:26.654+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] estMatcherDelegatingAuthorizationManager : Authorizing GET /api/users
2024-11-07T15:45:26.654+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] estMatcherDelegatingAuthorizationManager : Checking authorization on GET /api/users using org.springframework.security.authorization.AuthenticatedAuthorizationManager@62baeae3
2024-11-07T15:45:26.655+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users
2024-11-07T15:45:26.655+07:00  INFO 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] c.e.i.Controller.UserController          : UserName :  admin@gmail.com
2024-11-07T15:45:26.655+07:00  INFO 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] c.e.i.Controller.UserController          : ADMIN
2024-11-07T15:45:26.655+07:00  INFO 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] c.e.i.Controller.UserController          : USER
2024-11-07T15:45:26.665+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T15:46:04.484+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:46:04.484+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2024-11-07T15:46:04.484+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:46:04.484+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:46:04.484+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:46:04.484+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:46:04.484+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:46:04.484+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:46:04.484+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:46:04.484+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:46:04.484+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T15:46:04.487+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T15:46:04.488+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T15:46:04.488+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:46:04.488+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:46:04.488+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:46:04.488+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:46:04.488+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:46:04.488+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:46:04.488+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T15:46:04.488+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:46:04.488+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:46:04.488+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/register
2024-11-07T15:46:04.488+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/register using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x0000000135ada620@771ff8df
2024-11-07T15:46:04.488+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/register
2024-11-07T15:46:04.568+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T15:46:19.733+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:46:19.733+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2024-11-07T15:46:19.733+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:46:19.733+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:46:19.733+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:46:19.733+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:46:19.733+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:46:19.733+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:46:19.734+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:46:19.734+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:46:19.734+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T15:46:19.737+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T15:46:19.738+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T15:46:19.738+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:46:19.738+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:46:19.738+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:46:19.738+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:46:19.738+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:46:19.738+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:46:19.738+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T15:46:19.738+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:46:19.738+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:46:19.738+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/register
2024-11-07T15:46:19.738+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/register using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x0000000135ada620@771ff8df
2024-11-07T15:46:19.738+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/register
2024-11-07T15:46:19.815+07:00  WARN 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2024-11-07T15:46:19.815+07:00 ERROR 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry '1' for key 'user.UKtb5gq05t7xhddh2idsdy8ddd'
2024-11-07T15:46:19.817+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T15:46:19.817+07:00 ERROR 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry '1' for key 'user.UKtb5gq05t7xhddh2idsdy8ddd'] [insert into user (created_at,department_id,email,first_name,last_name,password,updated_at,id) values (?,?,?,?,?,?,?,?)]; SQL [insert into user (created_at,department_id,email,first_name,last_name,password,updated_at,id) values (?,?,?,?,?,?,?,?)]; constraint [user.UKtb5gq05t7xhddh2idsdy8ddd]] with root cause

java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'user.UKtb5gq05t7xhddh2idsdy8ddd'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:118) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:912) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1054) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1003) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1312) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:988) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:na]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:134) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:55) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:104) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:110) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:632) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:499) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:371) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:41) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1425) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:487) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2324) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1981) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562) ~[spring-orm-6.1.11.jar:6.1.11]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:795) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:758) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:663) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:413) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.11.jar:6.1.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768) ~[spring-aop-6.1.11.jar:6.1.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720) ~[spring-aop-6.1.11.jar:6.1.11]
	at com.example.invoiceProject.Service.UserService$$SpringCGLIB$$0.createUser(<generated>) ~[classes/:na]
	at com.example.invoiceProject.Controller.UserController.createUser(UserController.java:40) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:145) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T15:46:19.819+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@80585f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71b336f9, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@209c5d58, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b88231b, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T15:46:19.837+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /error
2024-11-07T15:46:19.837+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:46:19.837+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:46:19.837+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:46:19.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:46:19.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:46:19.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:46:19.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:46:19.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:46:19.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:46:19.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:46:19.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:46:19.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:46:19.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:46:19.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:46:19.838+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] estMatcherDelegatingAuthorizationManager : Authorizing POST /error
2024-11-07T15:46:19.839+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /error using org.springframework.security.authorization.AuthenticatedAuthorizationManager@62baeae3
2024-11-07T15:46:19.839+07:00 TRACE 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:46:19.839+07:00 DEBUG 70880 --- [InvoiceManagement] [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /error
2024-11-07T15:46:42.221+07:00  INFO 70880 --- [InvoiceManagement] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T15:46:42.223+07:00  INFO 70880 --- [InvoiceManagement] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-11-07T15:46:42.230+07:00  INFO 70880 --- [InvoiceManagement] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-11-07T15:46:49.427+07:00  INFO 70997 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : Starting InvoiceProjectApplication using Java 22.0.1 with PID 70997 (/Users/pro/Documents/Workspace/invoiceProject/target/classes started by pro in /Users/pro/Documents/Workspace/invoiceProject)
2024-11-07T15:46:49.429+07:00  INFO 70997 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : No active profile set, falling back to 1 default profile: "default"
2024-11-07T15:46:50.056+07:00  INFO 70997 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-07T15:46:50.147+07:00  INFO 70997 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 83 ms. Found 15 JPA repository interfaces.
2024-11-07T15:46:50.658+07:00  INFO 70997 --- [InvoiceManagement] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-11-07T15:46:50.668+07:00  INFO 70997 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-11-07T15:46:50.668+07:00  INFO 70997 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.26]
2024-11-07T15:46:50.714+07:00  INFO 70997 --- [InvoiceManagement] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-11-07T15:46:50.715+07:00  INFO 70997 --- [InvoiceManagement] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1248 ms
2024-11-07T15:46:50.850+07:00  INFO 70997 --- [InvoiceManagement] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-07T15:46:50.894+07:00  INFO 70997 --- [InvoiceManagement] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-11-07T15:46:50.919+07:00  INFO 70997 --- [InvoiceManagement] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-11-07T15:46:51.166+07:00  INFO 70997 --- [InvoiceManagement] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-07T15:46:51.186+07:00  INFO 70997 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-11-07T15:46:51.488+07:00  INFO 70997 --- [InvoiceManagement] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@53b7bf01
2024-11-07T15:46:51.489+07:00  INFO 70997 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-11-07T15:46:52.501+07:00  INFO 70997 --- [InvoiceManagement] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-07T15:46:52.607+07:00  INFO 70997 --- [InvoiceManagement] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T15:46:52.841+07:00  INFO 70997 --- [InvoiceManagement] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-11-07T15:46:53.461+07:00  INFO 70997 --- [InvoiceManagement] [main] c.e.i.Config.ApplicationInitConfig       : Initializing Application
2024-11-07T15:46:53.491+07:00  WARN 70997 --- [InvoiceManagement] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-11-07T15:46:53.503+07:00 TRACE 70997 --- [InvoiceManagement] [main] eGlobalAuthenticationAutowiredConfigurer : Eagerly initializing {securityConfig=com.example.invoiceProject.Config.SecurityConfig$$SpringCGLIB$$0@71b75f99}
2024-11-07T15:46:53.504+07:00 DEBUG 70997 --- [InvoiceManagement] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-11-07T15:46:53.555+07:00  INFO 70997 --- [InvoiceManagement] [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-11-07T15:46:53.740+07:00 DEBUG 70997 --- [InvoiceManagement] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BearerTokenAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-11-07T15:46:53.988+07:00  INFO 70997 --- [InvoiceManagement] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2024-11-07T15:46:53.996+07:00  INFO 70997 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : Started InvoiceProjectApplication in 4.944 seconds (process running for 5.26)
2024-11-07T15:46:54.114+07:00  INFO 70997 --- [InvoiceManagement] [main] c.e.i.Config.ApplicationInitConfig       : Application initialization completed .....
2024-11-07T15:47:10.158+07:00  INFO 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-07T15:47:10.158+07:00  INFO 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-11-07T15:47:10.159+07:00  INFO 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-11-07T15:47:10.171+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@27458544, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1db8c1d1, org.springframework.security.web.context.SecurityContextHolderFilter@1cfca845, org.springframework.security.web.header.HeaderWriterFilter@49842c0d, org.springframework.web.filter.CorsFilter@5376fe17, org.springframework.security.web.authentication.logout.LogoutFilter@6f53e863, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@65b9ebee, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@99e68b5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6162d87c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@41680f14, org.springframework.security.web.session.SessionManagementFilter@377d66f, org.springframework.security.web.access.ExceptionTranslationFilter@3ef2816a, org.springframework.security.web.access.intercept.AuthorizationFilter@7cf1bf54]] (1/1)
2024-11-07T15:47:10.172+07:00 DEBUG 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2024-11-07T15:47:10.173+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:47:10.173+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:47:10.174+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:47:10.176+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:47:10.177+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:47:10.177+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:47:10.178+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:47:10.178+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:47:10.179+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T15:47:10.227+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T15:47:10.228+07:00 DEBUG 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T15:47:10.228+07:00 DEBUG 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:47:10.229+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:47:10.229+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:47:10.229+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:47:10.230+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:47:10.230+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:47:10.230+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T15:47:10.231+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:47:10.231+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:47:10.231+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/register
2024-11-07T15:47:10.232+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/register using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x0000000136ac0220@3de8c759
2024-11-07T15:47:10.232+07:00 DEBUG 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/register
2024-11-07T15:47:10.468+07:00 TRACE 70997 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T15:55:25.286+07:00  INFO 70997 --- [InvoiceManagement] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T15:55:25.287+07:00  INFO 70997 --- [InvoiceManagement] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-11-07T15:55:25.293+07:00  INFO 70997 --- [InvoiceManagement] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-11-07T15:55:28.611+07:00  INFO 71106 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : Starting InvoiceProjectApplication using Java 22.0.1 with PID 71106 (/Users/pro/Documents/Workspace/invoiceProject/target/classes started by pro in /Users/pro/Documents/Workspace/invoiceProject)
2024-11-07T15:55:28.612+07:00  INFO 71106 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : No active profile set, falling back to 1 default profile: "default"
2024-11-07T15:55:29.247+07:00  INFO 71106 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-07T15:55:29.330+07:00  INFO 71106 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 76 ms. Found 15 JPA repository interfaces.
2024-11-07T15:55:29.842+07:00  INFO 71106 --- [InvoiceManagement] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-11-07T15:55:29.853+07:00  INFO 71106 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-11-07T15:55:29.854+07:00  INFO 71106 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.26]
2024-11-07T15:55:29.897+07:00  INFO 71106 --- [InvoiceManagement] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-11-07T15:55:29.898+07:00  INFO 71106 --- [InvoiceManagement] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1252 ms
2024-11-07T15:55:30.034+07:00  INFO 71106 --- [InvoiceManagement] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-07T15:55:30.085+07:00  INFO 71106 --- [InvoiceManagement] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-11-07T15:55:30.119+07:00  INFO 71106 --- [InvoiceManagement] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-11-07T15:55:30.359+07:00  INFO 71106 --- [InvoiceManagement] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-07T15:55:30.377+07:00  INFO 71106 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-11-07T15:55:30.656+07:00  INFO 71106 --- [InvoiceManagement] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@26101efc
2024-11-07T15:55:30.658+07:00  INFO 71106 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-11-07T15:55:31.604+07:00  INFO 71106 --- [InvoiceManagement] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-07T15:55:31.703+07:00  INFO 71106 --- [InvoiceManagement] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T15:55:31.977+07:00  INFO 71106 --- [InvoiceManagement] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-11-07T15:55:32.549+07:00  INFO 71106 --- [InvoiceManagement] [main] c.e.i.Config.ApplicationInitConfig       : Initializing Application
2024-11-07T15:55:32.578+07:00  WARN 71106 --- [InvoiceManagement] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-11-07T15:55:32.589+07:00 TRACE 71106 --- [InvoiceManagement] [main] eGlobalAuthenticationAutowiredConfigurer : Eagerly initializing {securityConfig=com.example.invoiceProject.Config.SecurityConfig$$SpringCGLIB$$0@4eef2522}
2024-11-07T15:55:32.590+07:00 DEBUG 71106 --- [InvoiceManagement] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-11-07T15:55:32.642+07:00  INFO 71106 --- [InvoiceManagement] [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-11-07T15:55:32.816+07:00 DEBUG 71106 --- [InvoiceManagement] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BearerTokenAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-11-07T15:55:33.045+07:00  INFO 71106 --- [InvoiceManagement] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2024-11-07T15:55:33.054+07:00  INFO 71106 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : Started InvoiceProjectApplication in 4.818 seconds (process running for 5.132)
2024-11-07T15:55:33.173+07:00  INFO 71106 --- [InvoiceManagement] [main] c.e.i.Config.ApplicationInitConfig       : Application initialization completed .....
2024-11-07T15:56:19.208+07:00  INFO 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-07T15:56:19.208+07:00  INFO 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-11-07T15:56:19.210+07:00  INFO 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-11-07T15:56:19.221+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@20437180, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@52a48c37, org.springframework.security.web.context.SecurityContextHolderFilter@286e2b71, org.springframework.security.web.header.HeaderWriterFilter@7fc8930f, org.springframework.web.filter.CorsFilter@13bc5cb6, org.springframework.security.web.authentication.logout.LogoutFilter@7d5e165, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@106277d6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1b3fff29, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@74f446ba, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2c506502, org.springframework.security.web.session.SessionManagementFilter@74d6d5ca, org.springframework.security.web.access.ExceptionTranslationFilter@6816b0cb, org.springframework.security.web.access.intercept.AuthorizationFilter@5bc3c4e5]] (1/1)
2024-11-07T15:56:19.221+07:00 DEBUG 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2024-11-07T15:56:19.222+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:56:19.223+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:56:19.224+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:56:19.225+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:56:19.225+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:56:19.226+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:56:19.226+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:56:19.227+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:56:19.227+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T15:56:19.271+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T15:56:19.272+07:00 DEBUG 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T15:56:19.272+07:00 DEBUG 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:56:19.273+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:56:19.273+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:56:19.273+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:56:19.274+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:56:19.275+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:56:19.275+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T15:56:19.275+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:56:19.275+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:56:19.275+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/register
2024-11-07T15:56:19.276+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/register using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x000000012eada620@53452a87
2024-11-07T15:56:19.277+07:00 DEBUG 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/register
2024-11-07T15:56:19.540+07:00 TRACE 71106 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T15:58:58.712+07:00  INFO 71106 --- [InvoiceManagement] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T15:58:58.713+07:00  INFO 71106 --- [InvoiceManagement] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-11-07T15:58:58.718+07:00  INFO 71106 --- [InvoiceManagement] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-11-07T15:59:01.555+07:00  INFO 71147 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : Starting InvoiceProjectApplication using Java 22.0.1 with PID 71147 (/Users/pro/Documents/Workspace/invoiceProject/target/classes started by pro in /Users/pro/Documents/Workspace/invoiceProject)
2024-11-07T15:59:01.557+07:00  INFO 71147 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : No active profile set, falling back to 1 default profile: "default"
2024-11-07T15:59:02.177+07:00  INFO 71147 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-07T15:59:02.263+07:00  INFO 71147 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 80 ms. Found 15 JPA repository interfaces.
2024-11-07T15:59:02.757+07:00  INFO 71147 --- [InvoiceManagement] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-11-07T15:59:02.768+07:00  INFO 71147 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-11-07T15:59:02.768+07:00  INFO 71147 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.26]
2024-11-07T15:59:02.814+07:00  INFO 71147 --- [InvoiceManagement] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-11-07T15:59:02.814+07:00  INFO 71147 --- [InvoiceManagement] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1222 ms
2024-11-07T15:59:02.955+07:00  INFO 71147 --- [InvoiceManagement] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-07T15:59:03.007+07:00  INFO 71147 --- [InvoiceManagement] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-11-07T15:59:03.036+07:00  INFO 71147 --- [InvoiceManagement] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-11-07T15:59:03.290+07:00  INFO 71147 --- [InvoiceManagement] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-07T15:59:03.310+07:00  INFO 71147 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-11-07T15:59:03.596+07:00  INFO 71147 --- [InvoiceManagement] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4e2109fe
2024-11-07T15:59:03.598+07:00  INFO 71147 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-11-07T15:59:04.578+07:00  INFO 71147 --- [InvoiceManagement] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-07T15:59:04.679+07:00  INFO 71147 --- [InvoiceManagement] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T15:59:04.967+07:00  INFO 71147 --- [InvoiceManagement] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-11-07T15:59:05.540+07:00  INFO 71147 --- [InvoiceManagement] [main] c.e.i.Config.ApplicationInitConfig       : Initializing Application
2024-11-07T15:59:05.568+07:00  WARN 71147 --- [InvoiceManagement] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-11-07T15:59:05.579+07:00 TRACE 71147 --- [InvoiceManagement] [main] eGlobalAuthenticationAutowiredConfigurer : Eagerly initializing {securityConfig=com.example.invoiceProject.Config.SecurityConfig$$SpringCGLIB$$0@4eef2522}
2024-11-07T15:59:05.580+07:00 DEBUG 71147 --- [InvoiceManagement] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-11-07T15:59:05.634+07:00  INFO 71147 --- [InvoiceManagement] [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-11-07T15:59:05.815+07:00 DEBUG 71147 --- [InvoiceManagement] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BearerTokenAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-11-07T15:59:06.083+07:00  INFO 71147 --- [InvoiceManagement] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2024-11-07T15:59:06.092+07:00  INFO 71147 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : Started InvoiceProjectApplication in 4.921 seconds (process running for 5.221)
2024-11-07T15:59:06.228+07:00  INFO 71147 --- [InvoiceManagement] [main] c.e.i.Config.ApplicationInitConfig       : Application initialization completed .....
2024-11-07T15:59:16.186+07:00  INFO 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-07T15:59:16.186+07:00  INFO 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-11-07T15:59:16.187+07:00  INFO 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-11-07T15:59:16.198+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@53c34264, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@64e0ca5f, org.springframework.security.web.context.SecurityContextHolderFilter@71adea8d, org.springframework.security.web.header.HeaderWriterFilter@19f3c1f7, org.springframework.web.filter.CorsFilter@11db2938, org.springframework.security.web.authentication.logout.LogoutFilter@253c82ad, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@b5a6a82, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@74d6d5ca, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5afd2f4e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@22a2b8e9, org.springframework.security.web.session.SessionManagementFilter@6ddab96c, org.springframework.security.web.access.ExceptionTranslationFilter@13b0755e, org.springframework.security.web.access.intercept.AuthorizationFilter@55a430b2]] (1/1)
2024-11-07T15:59:16.198+07:00 DEBUG 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2024-11-07T15:59:16.199+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:59:16.199+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:59:16.201+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:59:16.201+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:59:16.203+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:59:16.203+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:59:16.204+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:59:16.204+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:59:16.205+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T15:59:16.245+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T15:59:16.245+07:00 DEBUG 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T15:59:16.246+07:00 DEBUG 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:59:16.246+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:59:16.246+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:59:16.247+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:59:16.247+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:59:16.248+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:59:16.248+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T15:59:16.248+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:59:16.248+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:59:16.249+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/register
2024-11-07T15:59:16.250+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/register using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x0000000136ada930@5de8e56a
2024-11-07T15:59:16.250+07:00 DEBUG 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/register
2024-11-07T15:59:16.493+07:00  WARN 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2024-11-07T15:59:16.494+07:00 ERROR 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry '1' for key 'user.UKtb5gq05t7xhddh2idsdy8ddd'
2024-11-07T15:59:16.501+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T15:59:16.502+07:00 ERROR 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry '1' for key 'user.UKtb5gq05t7xhddh2idsdy8ddd'] [insert into user (created_at,department_id,email,first_name,last_name,password,updated_at,id) values (?,?,?,?,?,?,?,?)]; SQL [insert into user (created_at,department_id,email,first_name,last_name,password,updated_at,id) values (?,?,?,?,?,?,?,?)]; constraint [user.UKtb5gq05t7xhddh2idsdy8ddd]] with root cause

java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'user.UKtb5gq05t7xhddh2idsdy8ddd'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:118) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:912) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1054) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1003) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1312) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:988) ~[mysql-connector-j-8.3.0.jar:8.3.0]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:na]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:134) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:55) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:104) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:110) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:632) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:499) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:371) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:41) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1425) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:487) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2324) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1981) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562) ~[spring-orm-6.1.11.jar:6.1.11]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:795) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:758) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:663) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:413) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.11.jar:6.1.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.11.jar:6.1.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768) ~[spring-aop-6.1.11.jar:6.1.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720) ~[spring-aop-6.1.11.jar:6.1.11]
	at com.example.invoiceProject.Service.UserService$$SpringCGLIB$$0.createUser(<generated>) ~[classes/:na]
	at com.example.invoiceProject.Controller.UserController.createUser(UserController.java:40) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:145) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T15:59:16.511+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@53c34264, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@64e0ca5f, org.springframework.security.web.context.SecurityContextHolderFilter@71adea8d, org.springframework.security.web.header.HeaderWriterFilter@19f3c1f7, org.springframework.web.filter.CorsFilter@11db2938, org.springframework.security.web.authentication.logout.LogoutFilter@253c82ad, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@b5a6a82, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@74d6d5ca, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5afd2f4e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@22a2b8e9, org.springframework.security.web.session.SessionManagementFilter@6ddab96c, org.springframework.security.web.access.ExceptionTranslationFilter@13b0755e, org.springframework.security.web.access.intercept.AuthorizationFilter@55a430b2]] (1/1)
2024-11-07T15:59:16.511+07:00 DEBUG 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /error
2024-11-07T15:59:16.512+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T15:59:16.512+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T15:59:16.512+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T15:59:16.512+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T15:59:16.512+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T15:59:16.512+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T15:59:16.512+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T15:59:16.512+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T15:59:16.513+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T15:59:16.513+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T15:59:16.513+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T15:59:16.513+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T15:59:16.513+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T15:59:16.513+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T15:59:16.513+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] estMatcherDelegatingAuthorizationManager : Authorizing POST /error
2024-11-07T15:59:16.514+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /error using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6a6183f1
2024-11-07T15:59:16.514+07:00 TRACE 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T15:59:16.514+07:00 DEBUG 71147 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /error
2024-11-07T16:03:30.561+07:00  INFO 71147 --- [InvoiceManagement] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T16:03:30.562+07:00  INFO 71147 --- [InvoiceManagement] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-11-07T16:03:30.569+07:00  INFO 71147 --- [InvoiceManagement] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-11-07T16:03:34.096+07:00  INFO 71212 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : Starting InvoiceProjectApplication using Java 22.0.1 with PID 71212 (/Users/pro/Documents/Workspace/invoiceProject/target/classes started by pro in /Users/pro/Documents/Workspace/invoiceProject)
2024-11-07T16:03:34.097+07:00  INFO 71212 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : No active profile set, falling back to 1 default profile: "default"
2024-11-07T16:03:34.767+07:00  INFO 71212 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-07T16:03:34.859+07:00  INFO 71212 --- [InvoiceManagement] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 85 ms. Found 15 JPA repository interfaces.
2024-11-07T16:03:35.414+07:00  INFO 71212 --- [InvoiceManagement] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-11-07T16:03:35.427+07:00  INFO 71212 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-11-07T16:03:35.427+07:00  INFO 71212 --- [InvoiceManagement] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.26]
2024-11-07T16:03:35.476+07:00  INFO 71212 --- [InvoiceManagement] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-11-07T16:03:35.476+07:00  INFO 71212 --- [InvoiceManagement] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1345 ms
2024-11-07T16:03:35.617+07:00  INFO 71212 --- [InvoiceManagement] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-07T16:03:35.676+07:00  INFO 71212 --- [InvoiceManagement] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-11-07T16:03:35.710+07:00  INFO 71212 --- [InvoiceManagement] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-11-07T16:03:36.098+07:00  INFO 71212 --- [InvoiceManagement] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-07T16:03:36.145+07:00  INFO 71212 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-11-07T16:03:36.673+07:00  INFO 71212 --- [InvoiceManagement] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@52f43225
2024-11-07T16:03:36.676+07:00  INFO 71212 --- [InvoiceManagement] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-11-07T16:03:38.099+07:00  INFO 71212 --- [InvoiceManagement] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-07T16:03:38.826+07:00  INFO 71212 --- [InvoiceManagement] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-07T16:03:39.273+07:00  INFO 71212 --- [InvoiceManagement] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-11-07T16:03:40.229+07:00  INFO 71212 --- [InvoiceManagement] [main] c.e.i.Config.ApplicationInitConfig       : Initializing Application
2024-11-07T16:03:40.278+07:00  WARN 71212 --- [InvoiceManagement] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-11-07T16:03:40.295+07:00 TRACE 71212 --- [InvoiceManagement] [main] eGlobalAuthenticationAutowiredConfigurer : Eagerly initializing {securityConfig=com.example.invoiceProject.Config.SecurityConfig$$SpringCGLIB$$0@5a1e28ee}
2024-11-07T16:03:40.298+07:00 DEBUG 71212 --- [InvoiceManagement] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-11-07T16:03:40.397+07:00  INFO 71212 --- [InvoiceManagement] [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-11-07T16:03:40.810+07:00 DEBUG 71212 --- [InvoiceManagement] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BearerTokenAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-11-07T16:03:41.223+07:00  INFO 71212 --- [InvoiceManagement] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2024-11-07T16:03:41.241+07:00  INFO 71212 --- [InvoiceManagement] [main] c.e.i.InvoiceProjectApplication          : Started InvoiceProjectApplication in 7.505 seconds (process running for 7.831)
2024-11-07T16:03:41.788+07:00  WARN 71212 --- [InvoiceManagement] [main] c.e.i.Config.ApplicationInitConfig       : admin user has been created with default password: admin, please change it
2024-11-07T16:03:41.788+07:00  INFO 71212 --- [InvoiceManagement] [main] c.e.i.Config.ApplicationInitConfig       : Application initialization completed .....
2024-11-07T16:04:07.016+07:00  INFO 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-07T16:04:07.017+07:00  INFO 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-11-07T16:04:07.018+07:00  INFO 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-11-07T16:04:07.030+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@274b6088, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5dd0d782, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@79c15dd3, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb158e3, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T16:04:07.031+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /department/add
2024-11-07T16:04:07.031+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T16:04:07.032+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T16:04:07.034+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T16:04:07.036+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T16:04:07.036+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T16:04:07.037+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T16:04:07.038+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T16:04:07.038+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T16:04:07.039+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T16:04:07.075+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T16:04:07.076+07:00 ERROR 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception

com.example.invoiceProject.Exception.AppException: Unauthenticated
	at com.example.invoiceProject.Service.JwtService.JwtService.verifyToken(JwtService.java:94) ~[classes/:na]
	at com.example.invoiceProject.Service.AuthenticateService.introspect(AuthenticateService.java:44) ~[classes/:na]
	at com.example.invoiceProject.Config.CustomJwtDecoder.decode(CustomJwtDecoder.java:38) ~[classes/:na]
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:99) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:88) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T16:04:07.083+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@274b6088, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5dd0d782, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@79c15dd3, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb158e3, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T16:04:07.084+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /error
2024-11-07T16:04:07.084+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T16:04:07.084+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T16:04:07.084+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T16:04:07.084+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T16:04:07.084+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T16:04:07.084+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T16:04:07.084+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T16:04:07.084+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T16:04:07.085+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T16:04:07.085+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T16:04:07.087+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T16:04:07.087+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T16:04:07.087+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2024-11-07T16:04:07.088+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]
2024-11-07T16:04:07.088+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T16:04:07.088+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T16:04:07.089+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing POST /error
2024-11-07T16:04:07.090+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /error using org.springframework.security.authorization.AuthenticatedAuthorizationManager@45f7739c
2024-11-07T16:04:07.091+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:632) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:410) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:267) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:362) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:308) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:149) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T16:04:13.302+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@274b6088, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5dd0d782, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@79c15dd3, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb158e3, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T16:04:13.303+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /auth/token
2024-11-07T16:04:13.303+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T16:04:13.303+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T16:04:13.303+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T16:04:13.303+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T16:04:13.303+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T16:04:13.303+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T16:04:13.303+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T16:04:13.303+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T16:04:13.303+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] .s.r.w.a.BearerTokenAuthenticationFilter : Did not process request since did not find bearer token
2024-11-07T16:04:13.304+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T16:04:13.304+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T16:04:13.304+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T16:04:13.304+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T16:04:13.304+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2024-11-07T16:04:13.304+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]
2024-11-07T16:04:13.304+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T16:04:13.304+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T16:04:13.304+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing POST /auth/token
2024-11-07T16:04:13.304+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /auth/token using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x0000000130adc5b0@4d84ad57
2024-11-07T16:04:13.305+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /auth/token
2024-11-07T16:04:13.470+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T16:04:26.698+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@274b6088, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5dd0d782, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@79c15dd3, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb158e3, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T16:04:26.698+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /department/add
2024-11-07T16:04:26.698+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T16:04:26.698+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T16:04:26.698+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T16:04:26.698+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T16:04:26.698+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T16:04:26.698+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T16:04:26.698+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T16:04:26.699+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T16:04:26.699+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T16:04:26.710+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T16:04:26.711+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T16:04:26.711+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@6b204bea, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T16:04:26.711+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T16:04:26.711+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T16:04:26.711+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T16:04:26.711+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T16:04:26.712+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@6b204bea, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T16:04:26.712+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T16:04:26.712+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T16:04:26.712+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T16:04:26.712+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing POST /department/add
2024-11-07T16:04:26.712+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /department/add using org.springframework.security.authorization.AuthenticatedAuthorizationManager@45f7739c
2024-11-07T16:04:26.712+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /department/add
2024-11-07T16:04:26.750+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T16:04:36.389+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@274b6088, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5dd0d782, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@79c15dd3, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb158e3, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T16:04:36.389+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /department/add
2024-11-07T16:04:36.389+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T16:04:36.389+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T16:04:36.389+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T16:04:36.389+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T16:04:36.389+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T16:04:36.389+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T16:04:36.389+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T16:04:36.390+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T16:04:36.390+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T16:04:36.393+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T16:04:36.393+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T16:04:36.394+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@6b204bea, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T16:04:36.394+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T16:04:36.394+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T16:04:36.394+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T16:04:36.394+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T16:04:36.394+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@6b204bea, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T16:04:36.394+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T16:04:36.394+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T16:04:36.394+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T16:04:36.394+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] estMatcherDelegatingAuthorizationManager : Authorizing POST /department/add
2024-11-07T16:04:36.394+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /department/add using org.springframework.security.authorization.AuthenticatedAuthorizationManager@45f7739c
2024-11-07T16:04:36.394+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /department/add
2024-11-07T16:04:36.401+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T16:04:51.527+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@274b6088, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5dd0d782, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@79c15dd3, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb158e3, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T16:04:51.527+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2024-11-07T16:04:51.527+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T16:04:51.527+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T16:04:51.527+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T16:04:51.527+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T16:04:51.527+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T16:04:51.527+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T16:04:51.527+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T16:04:51.528+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T16:04:51.528+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T16:04:51.531+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T16:04:51.531+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T16:04:51.531+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T16:04:51.531+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T16:04:51.531+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T16:04:51.532+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T16:04:51.532+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T16:04:51.532+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T16:04:51.532+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T16:04:51.532+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T16:04:51.532+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T16:04:51.532+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/register
2024-11-07T16:04:51.532+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/register using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x0000000130adc5b0@4d84ad57
2024-11-07T16:04:51.532+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/register
2024-11-07T16:04:51.628+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-6] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T16:05:01.176+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@274b6088, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5dd0d782, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@79c15dd3, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb158e3, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T16:05:01.177+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2024-11-07T16:05:01.177+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T16:05:01.177+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T16:05:01.177+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T16:05:01.177+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T16:05:01.177+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T16:05:01.177+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T16:05:01.177+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T16:05:01.177+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T16:05:01.177+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T16:05:01.181+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T16:05:01.181+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T16:05:01.181+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T16:05:01.181+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T16:05:01.181+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T16:05:01.181+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T16:05:01.181+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T16:05:01.181+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c6f6d02c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T16:05:01.181+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T16:05:01.181+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T16:05:01.181+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T16:05:01.181+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/register
2024-11-07T16:05:01.182+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/register using org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer$$Lambda/0x0000000130adc5b0@4d84ad57
2024-11-07T16:05:01.182+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/register
2024-11-07T16:05:01.256+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-7] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T16:06:30.339+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@274b6088, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5dd0d782, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@79c15dd3, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb158e3, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T16:06:30.339+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/vendors
2024-11-07T16:06:30.339+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T16:06:30.339+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T16:06:30.339+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T16:06:30.339+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T16:06:30.339+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T16:06:30.340+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T16:06:30.340+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T16:06:30.340+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T16:06:30.340+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T16:06:30.340+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T16:06:30.341+07:00 ERROR 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception

com.example.invoiceProject.Exception.AppException: Unauthenticated
	at com.example.invoiceProject.Service.JwtService.JwtService.verifyToken(JwtService.java:94) ~[classes/:na]
	at com.example.invoiceProject.Service.AuthenticateService.introspect(AuthenticateService.java:44) ~[classes/:na]
	at com.example.invoiceProject.Config.CustomJwtDecoder.decode(CustomJwtDecoder.java:38) ~[classes/:na]
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:99) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:88) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T16:06:30.342+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@274b6088, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5dd0d782, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@79c15dd3, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb158e3, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T16:06:30.342+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /error
2024-11-07T16:06:30.342+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T16:06:30.342+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T16:06:30.342+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T16:06:30.342+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T16:06:30.342+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T16:06:30.342+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T16:06:30.342+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T16:06:30.342+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T16:06:30.342+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T16:06:30.342+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T16:06:30.342+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T16:06:30.342+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T16:06:30.343+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2024-11-07T16:06:30.343+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]
2024-11-07T16:06:30.343+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T16:06:30.343+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T16:06:30.343+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] estMatcherDelegatingAuthorizationManager : Authorizing POST /error
2024-11-07T16:06:30.343+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /error using org.springframework.security.authorization.AuthenticatedAuthorizationManager@45f7739c
2024-11-07T16:06:30.343+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-10] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:632) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:410) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:267) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:362) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:308) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:149) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T16:06:37.388+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@274b6088, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5dd0d782, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@79c15dd3, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb158e3, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T16:06:37.388+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/vendors
2024-11-07T16:06:37.388+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T16:06:37.388+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T16:06:37.388+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T16:06:37.388+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T16:06:37.388+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T16:06:37.388+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T16:06:37.389+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T16:06:37.389+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T16:06:37.389+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T16:06:37.392+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T16:06:37.393+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T16:06:37.393+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@6b204bea, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T16:06:37.393+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T16:06:37.393+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T16:06:37.393+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T16:06:37.393+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T16:06:37.393+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@6b204bea, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T16:06:37.393+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T16:06:37.393+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T16:06:37.393+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T16:06:37.393+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/vendors
2024-11-07T16:06:37.393+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/vendors using org.springframework.security.authorization.AuthenticatedAuthorizationManager@45f7739c
2024-11-07T16:06:37.393+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/vendors
2024-11-07T16:06:37.412+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-2] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T16:07:02.933+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@274b6088, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5dd0d782, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@79c15dd3, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb158e3, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T16:07:02.933+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/vendors
2024-11-07T16:07:02.933+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T16:07:02.934+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T16:07:02.934+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T16:07:02.934+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T16:07:02.934+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T16:07:02.934+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T16:07:02.934+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T16:07:02.934+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T16:07:02.934+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T16:07:02.937+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T16:07:02.937+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T16:07:02.937+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@6b204bea, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T16:07:02.938+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T16:07:02.938+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T16:07:02.938+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T16:07:02.938+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T16:07:02.938+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@6b204bea, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T16:07:02.938+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T16:07:02.938+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T16:07:02.938+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T16:07:02.938+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/vendors
2024-11-07T16:07:02.938+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/vendors using org.springframework.security.authorization.AuthenticatedAuthorizationManager@45f7739c
2024-11-07T16:07:02.938+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/vendors
2024-11-07T16:07:02.944+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T16:07:30.018+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@274b6088, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5dd0d782, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@79c15dd3, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb158e3, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T16:07:30.018+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/vendors
2024-11-07T16:07:30.018+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T16:07:30.018+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T16:07:30.018+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T16:07:30.018+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T16:07:30.018+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T16:07:30.019+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T16:07:30.019+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T16:07:30.019+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T16:07:30.019+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T16:07:30.022+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T16:07:30.022+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T16:07:30.022+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@6b204bea, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T16:07:30.022+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T16:07:30.022+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T16:07:30.022+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T16:07:30.022+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T16:07:30.022+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@6b204bea, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T16:07:30.022+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T16:07:30.023+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T16:07:30.023+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T16:07:30.023+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/vendors
2024-11-07T16:07:30.023+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/vendors using org.springframework.security.authorization.AuthenticatedAuthorizationManager@45f7739c
2024-11-07T16:07:30.023+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/vendors
2024-11-07T16:07:30.029+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-3] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T16:07:38.310+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@274b6088, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5dd0d782, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@79c15dd3, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb158e3, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T16:07:38.310+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/vendors
2024-11-07T16:07:38.311+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T16:07:38.311+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T16:07:38.311+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T16:07:38.311+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T16:07:38.311+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T16:07:38.311+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T16:07:38.311+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T16:07:38.311+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T16:07:38.311+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T16:07:38.312+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-11-07T16:07:38.312+07:00 ERROR 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception

com.example.invoiceProject.Exception.AppException: Unauthenticated
	at com.example.invoiceProject.Service.JwtService.JwtService.verifyToken(JwtService.java:94) ~[classes/:na]
	at com.example.invoiceProject.Service.AuthenticateService.introspect(AuthenticateService.java:44) ~[classes/:na]
	at com.example.invoiceProject.Config.CustomJwtDecoder.decode(CustomJwtDecoder.java:38) ~[classes/:na]
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:99) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:88) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T16:07:38.313+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@274b6088, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5dd0d782, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@79c15dd3, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb158e3, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T16:07:38.313+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /error
2024-11-07T16:07:38.313+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T16:07:38.313+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T16:07:38.313+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T16:07:38.313+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T16:07:38.313+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T16:07:38.313+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T16:07:38.313+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T16:07:38.313+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T16:07:38.313+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T16:07:38.313+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T16:07:38.314+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T16:07:38.314+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T16:07:38.314+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2024-11-07T16:07:38.314+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]
2024-11-07T16:07:38.314+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T16:07:38.314+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T16:07:38.314+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing GET /error
2024-11-07T16:07:38.314+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on GET /error using org.springframework.security.authorization.AuthenticatedAuthorizationManager@45f7739c
2024-11-07T16:07:38.314+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-4] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.11.jar:6.1.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.1.11.jar:6.1.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:632) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:410) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:267) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:362) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:308) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:149) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.26.jar:10.1.26]
	at java.base/java.lang.Thread.run(Thread.java:1570) ~[na:na]

2024-11-07T16:07:41.893+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@274b6088, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5dd0d782, org.springframework.security.web.context.SecurityContextHolderFilter@22b0fe7e, org.springframework.security.web.header.HeaderWriterFilter@73f83bff, org.springframework.web.filter.CorsFilter@79c15dd3, org.springframework.security.web.authentication.logout.LogoutFilter@6a2b30b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5d4042fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ddab96c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@286e2b71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb158e3, org.springframework.security.web.session.SessionManagementFilter@76e5278a, org.springframework.security.web.access.ExceptionTranslationFilter@12e33c7b, org.springframework.security.web.access.intercept.AuthorizationFilter@393e6bdd]] (1/1)
2024-11-07T16:07:41.893+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/vendors
2024-11-07T16:07:41.893+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2024-11-07T16:07:41.893+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2024-11-07T16:07:41.893+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2024-11-07T16:07:41.893+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2024-11-07T16:07:41.893+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking CorsFilter (5/13)
2024-11-07T16:07:41.893+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2024-11-07T16:07:41.893+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-11-07T16:07:41.894+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2024-11-07T16:07:41.894+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-11-07T16:07:41.897+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-11-07T16:07:41.897+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-11-07T16:07:41.897+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@6b204bea, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T16:07:41.897+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2024-11-07T16:07:41.897+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2024-11-07T16:07:41.897+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2024-11-07T16:07:41.897+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2024-11-07T16:07:41.897+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@6b204bea, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN, USER]]
2024-11-07T16:07:41.897+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2024-11-07T16:07:41.897+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2024-11-07T16:07:41.898+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2024-11-07T16:07:41.898+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] estMatcherDelegatingAuthorizationManager : Authorizing GET /api/vendors
2024-11-07T16:07:41.898+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] estMatcherDelegatingAuthorizationManager : Checking authorization on GET /api/vendors using org.springframework.security.authorization.AuthenticatedAuthorizationManager@45f7739c
2024-11-07T16:07:41.898+07:00 DEBUG 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/vendors
2024-11-07T16:07:41.939+07:00 TRACE 71212 --- [InvoiceManagement] [http-nio-8080-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
